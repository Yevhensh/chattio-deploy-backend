2017-07-11 17:56:13,873 1205518 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:13,880 1205525 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:13,881 1205526 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:13,882 1205527 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:13,882 1205527 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:13,882 1205527 [http-bio-8080-exec-14] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:13,882 1205527 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:13,882 1205527 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:13,882 1205527 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:13,882 1205527 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:13,882 1205527 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:13,882 1205527 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:13,882 1205527 [http-bio-8080-exec-14] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:13,883 1205528 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:13,884 1205529 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:13,884 1205529 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:13,884 1205529 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:13,884 1205529 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:13,884 1205529 [http-bio-8080-exec-14] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:13,886 1205531 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:13,887 1205532 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:13,888 1205533 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:13,888 1205533 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:13,888 1205533 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:13,888 1205533 [http-bio-8080-exec-14] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:13,888 1205533 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:13,889 1205534 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:13,889 1205534 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:13,889 1205534 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:13,889 1205534 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:13,889 1205534 [http-bio-8080-exec-14] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:13,943 1205588 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:13,943 1205588 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 17:56:13,943 1205588 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:13,944 1205589 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:56:13,945 1205590 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:13,946 1205591 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:13,946 1205591 [http-bio-8080-exec-14] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:13,946 1205591 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:13,946 1205591 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:13,946 1205591 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:13,946 1205591 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 17:56:13,946 1205591 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 17:56:13,947 1205592 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 17:56:13,947 1205592 [http-bio-8080-exec-14] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:13,947 1205592 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 17:56:13,949 1205594 [http-bio-8080-exec-14] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:13,951 1205596 [http-bio-8080-exec-14] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 17:56:13,958 1205603 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 17:56:13,958 1205603 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:13,973 1205618 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:13,973 1205618 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 17:56:13,973 1205618 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:13,973 1205618 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:13,973 1205618 [http-bio-8080-exec-14] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:13,973 1205618 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:13,974 1205619 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:13,974 1205619 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:13,982 1205627 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:13,983 1205628 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:13,983 1205628 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:56:13,984 1205629 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:13,984 1205629 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:13,984 1205629 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:13,984 1205629 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:13,984 1205629 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:13,984 1205629 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:13,984 1205629 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:13,984 1205629 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:13,985 1205630 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@701527c3]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:13,986 1205631 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:13,986 1205631 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:13,986 1205631 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:13,986 1205631 [http-bio-8080-exec-14] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:13,992 1205637 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:13,992 1205637 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 17:56:13,992 1205637 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:13,993 1205638 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:13,994 1205639 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:13,995 1205640 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:13,995 1205640 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 17:56:13,995 1205640 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 17:56:13,995 1205640 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 17:56:13,995 1205640 [http-bio-8080-exec-14] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:13,995 1205640 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 17:56:13,996 1205641 [http-bio-8080-exec-14] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:13,996 1205641 [http-bio-8080-exec-14] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 17:56:13,996 1205641 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 17:56:13,997 1205642 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:14,005 1205650 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:14,005 1205650 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 17:56:14,005 1205650 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:56:14,005 1205650 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 17:56:14,005 1205650 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 17:56:14,005 1205650 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 17:56:14,005 1205650 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 17:56:14,005 1205650 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 17:56:14,006 1205651 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 17:56:14,006 1205651 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 17:56:14,006 1205651 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 17:56:14,006 1205651 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 17:56:14,006 1205651 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 17:56:14,006 1205651 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 17:56:14,006 1205651 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 17:56:14,006 1205651 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 17:56:14,006 1205651 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 17:56:14,006 1205651 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 17:56:14,007 1205652 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 17:56:14,008 1205653 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 17:56:14,009 1205654 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 17:56:14,010 1205655 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 17:56:14,011 1205656 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 17:56:14,011 1205656 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 17:56:14,011 1205656 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 17:56:14,011 1205656 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 17:56:14,011 1205656 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 17:56:14,011 1205656 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 17:56:14,011 1205656 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 17:56:14,011 1205656 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 17:56:14,011 1205656 [http-bio-8080-exec-14] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:14,013 1205658 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:14,013 1205658 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:14,014 1205659 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:14,021 1205666 [http-bio-8080-exec-14] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 17:56:14,021 1205666 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:56:14,022 1205667 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:14,022 1205667 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:56:14,022 1205667 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:14,023 1205668 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:14,023 1205668 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:14,023 1205668 [http-bio-8080-exec-14] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 17:56:14,023 1205668 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:14,024 1205669 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:14,024 1205669 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:14,025 1205670 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:14,030 1205675 [http-bio-8080-exec-14] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 17:56:14,030 1205675 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:56:14,031 1205676 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:14,031 1205676 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:56:14,031 1205676 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:14,031 1205676 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:14,031 1205676 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:14,031 1205676 [http-bio-8080-exec-14] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 17:56:14,031 1205676 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:14,033 1205678 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:14,033 1205678 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:14,033 1205678 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:14,033 1205678 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:14,033 1205678 [http-bio-8080-exec-14] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:14,043 1205688 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:14,043 1205688 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 17:56:14,043 1205688 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499784974039 has an empty filter list
2017-07-11 17:56:14,043 1205688 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 17:56:14,043 1205688 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 17:56:14,044 1205689 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 17:56:14,044 1205689 [http-bio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 17:56:14,044 1205689 [http-bio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 17:56:14,044 1205689 [http-bio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:56:14,044 1205689 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 17:56:14,044 1205689 [http-bio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499784974039
2017-07-11 17:56:14,044 1205689 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:14,044 1205689 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:14,127 1205772 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/071/ci4tpu1x/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:14,127 1205772 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/071/ci4tpu1x/websocket'; against '/chat/**'
2017-07-11 17:56:14,128 1205773 [http-bio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - /chat/071/ci4tpu1x/websocket has an empty filter list
2017-07-11 17:56:14,139 1205784 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/071/ci4tpu1x/websocket]
2017-07-11 17:56:14,141 1205786 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/071/ci4tpu1x/websocket
2017-07-11 17:56:14,143 1205788 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/071/ci4tpu1x/websocket]
2017-07-11 17:56:14,144 1205789 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/071/ci4tpu1x/websocket] are [/chat/**]
2017-07-11 17:56:14,146 1205791 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/071/ci4tpu1x/websocket] are {}
2017-07-11 17:56:14,146 1205791 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/071/ci4tpu1x/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:56:14,147 1205792 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/071/ci4tpu1x/websocket] is: -1
2017-07-11 17:56:14,156 1205801 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/071/ci4tpu1x/websocket
2017-07-11 17:56:14,164 1205809 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:14,164 1205809 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:14,165 1205810 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ci4tpu1x]
2017-07-11 17:56:14,187 1205832 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 17:56:14,187 1205832 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@77490ed] for JPA transaction
2017-07-11 17:56:14,187 1205832 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:14,187 1205832 [http-bio-8080-exec-8] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:14,192 1205837 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@398caff4]
2017-07-11 17:56:14,193 1205838 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 17:56:14,193 1205838 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:14,194 1205839 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 17:56:14,194 1205839 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:14,194 1205839 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:14,194 1205839 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:14,194 1205839 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:14,195 1205840 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:14,195 1205840 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:14,195 1205840 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:14,195 1205840 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:14,195 1205840 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:14,195 1205840 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:14,196 1205841 [http-bio-8080-exec-8] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:14,196 1205841 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:14,196 1205841 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 17:56:14,196 1205841 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@77490ed]
2017-07-11 17:56:14,196 1205841 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:14,196 1205841 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 17:56:14,196 1205841 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 17:56:14,197 1205842 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#1], was: [com.chattio.entity.User.dialogs#1] (uninitialized)
2017-07-11 17:56:14,197 1205842 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#1], was: [com.chattio.entity.User.messages#1] (uninitialized)
2017-07-11 17:56:14,197 1205842 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#1], was: [com.chattio.entity.User.roles#1] (initialized)
2017-07-11 17:56:14,197 1205842 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 17:56:14,197 1205842 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 17:56:14,197 1205842 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 17:56:14,197 1205842 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[0], active=true, fullName=Yevhen Shabala, messages=<uninitialized>, id=1, dialogs=<uninitialized>, email=yevhen@gmail.com}
2017-07-11 17:56:14,198 1205843 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@77490ed] after transaction
2017-07-11 17:56:14,198 1205843 [http-bio-8080-exec-8] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:14,198 1205843 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=yevhen@gmail.com session=ci4tpu1x
2017-07-11 17:56:14,201 1205846 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=ci4tpu1x
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:16,339 1207984 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:16,340 1207985 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:16,342 1207987 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:16,342 1207987 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:16,343 1207988 [http-bio-8080-exec-14] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:16,343 1207988 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:16,343 1207988 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:16,343 1207988 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:16,343 1207988 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:16,343 1207988 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:16,343 1207988 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:16,343 1207988 [http-bio-8080-exec-14] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:16,343 1207988 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:16,344 1207989 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:16,344 1207989 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:16,344 1207989 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:16,344 1207989 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:16,344 1207989 [http-bio-8080-exec-14] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 17:56:16,363 1208008 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:16,364 1208009 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:16,365 1208010 [http-bio-8080-exec-14] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:16,365 1208010 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:16,365 1208010 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:16,365 1208010 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:16,365 1208010 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 17:56:16,365 1208010 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 17:56:16,365 1208010 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 17:56:16,365 1208010 [http-bio-8080-exec-14] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:16,365 1208010 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 17:56:16,366 1208011 [http-bio-8080-exec-14] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:16,367 1208012 [http-bio-8080-exec-14] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 17:56:16,368 1208013 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 17:56:16,368 1208013 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:16,376 1208021 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:16,383 1208028 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:16,384 1208029 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:56:16,384 1208029 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:16,384 1208029 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:16,385 1208030 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:16,386 1208031 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:16,386 1208031 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:16,386 1208031 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:16,390 1208035 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:16,390 1208035 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:16,391 1208036 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:16,391 1208036 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:16,391 1208036 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:16,391 1208036 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:16,391 1208036 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:16,391 1208036 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:16,391 1208036 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:16,391 1208036 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:16,391 1208036 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:16,392 1208037 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:16,392 1208037 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:16,392 1208037 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:16,397 1208042 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:16,397 1208042 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:16,399 1208044 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:56:16,399 1208044 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:16,399 1208044 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:16,399 1208044 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:16,399 1208044 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:16,400 1208045 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:16,400 1208045 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:16,400 1208045 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:16,400 1208045 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:16,401 1208046 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:16,401 1208046 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:16,401 1208046 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:16,405 1208050 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:16,405 1208050 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:56:16,405 1208050 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:16,405 1208050 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:16,406 1208051 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:16,411 1208056 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:16,411 1208056 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:16,412 1208057 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:16,412 1208057 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:16,412 1208057 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:16,412 1208057 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:16,412 1208057 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:16,412 1208057 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:16,412 1208057 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:16,412 1208057 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:16,412 1208057 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:16,415 1208060 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:16,415 1208060 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:16,415 1208060 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:16,415 1208060 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:16,415 1208060 [http-bio-8080-exec-14] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:16,790 1208435 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 6 sessions: [zttclwk3, u5zzk14n, 35vmfert, 21khx1yc, lx2rsaju, szxje0xh]
2017-07-11 17:56:41,598 1233243 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ci4tpu1x] closed with CloseStatus[code=1000, reason=null]
2017-07-11 17:56:41,598 1233243 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ci4tpu1x
2017-07-11 17:56:41,599 1233244 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ci4tpu1x
2017-07-11 17:56:41,600 1233245 [clientOutboundChannel-57] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@4c073430: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_USER, simpSessionId=ci4tpu1x}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@4c073430: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_USER, simpSessionId=ci4tpu1x}]
2017-07-11 17:56:41,601 1233246 [http-bio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=orwyog5d] closed with CloseStatus[code=1000, reason=null]
2017-07-11 17:56:41,601 1233246 [http-bio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session orwyog5d
2017-07-11 17:56:41,601 1233246 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=orwyog5d
2017-07-11 17:56:41,602 1233247 [clientOutboundChannel-56] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=orwyog5d}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=orwyog5d}]
2017-07-11 17:56:42,469 1234114 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:42,469 1234114 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:42,469 1234114 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:42,469 1234114 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:42,469 1234114 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:42,469 1234114 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:42,471 1234116 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:42,472 1234117 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:42,473 1234118 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:42,473 1234118 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:42,473 1234118 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:42,473 1234118 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:42,473 1234118 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:42,475 1234120 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:42,476 1234121 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:42,477 1234122 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:42,478 1234123 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:42,478 1234123 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:42,478 1234123 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:42,478 1234123 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:42,479 1234124 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:42,479 1234124 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:42,556 1234201 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:42,557 1234202 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 17:56:42,558 1234203 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:42,558 1234203 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 17:56:42,558 1234203 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 17:56:42,559 1234204 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:42,566 1234211 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:42,566 1234211 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 17:56:42,566 1234211 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:42,567 1234212 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:42,567 1234212 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:42,567 1234212 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:42,567 1234212 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:42,567 1234212 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:42,573 1234218 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:42,573 1234218 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:42,573 1234218 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:42,574 1234219 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:42,574 1234219 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:42,574 1234219 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:42,574 1234219 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:42,574 1234219 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:42,574 1234219 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:42,574 1234219 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:42,574 1234219 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:42,576 1234221 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:42,576 1234221 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:42,576 1234221 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:42,576 1234221 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:42,576 1234221 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:42,598 1234243 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:42,599 1234244 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 17:56:42,600 1234245 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:42,600 1234245 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 17:56:42,600 1234245 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 17:56:42,601 1234246 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:42,606 1234251 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 17:56:42,607 1234252 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 17:56:42,608 1234253 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 17:56:42,609 1234254 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 17:56:42,610 1234255 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:42,611 1234256 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:42,611 1234256 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:42,611 1234256 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:42,617 1234262 [http-bio-8080-exec-2] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 17:56:42,617 1234262 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:56:42,618 1234263 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:42,618 1234263 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:56:42,618 1234263 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:42,618 1234263 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:42,618 1234263 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:42,618 1234263 [http-bio-8080-exec-2] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 17:56:42,618 1234263 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:42,618 1234263 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:42,619 1234264 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:42,619 1234264 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:42,624 1234269 [http-bio-8080-exec-2] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 17:56:42,624 1234269 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:56:42,625 1234270 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:42,625 1234270 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:56:42,625 1234270 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:42,626 1234271 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:42,626 1234271 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:42,626 1234271 [http-bio-8080-exec-2] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 17:56:42,626 1234271 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:42,627 1234272 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:42,627 1234272 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:42,627 1234272 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:42,627 1234272 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:42,627 1234272 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:42,794 1234439 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:42,794 1234439 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 17:56:42,794 1234439 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785002788 has an empty filter list
2017-07-11 17:56:42,794 1234439 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 17:56:42,794 1234439 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 17:56:42,795 1234440 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 17:56:42,795 1234440 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 17:56:42,795 1234440 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 17:56:42,795 1234440 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:56:42,795 1234440 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 17:56:42,795 1234440 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785002788
2017-07-11 17:56:42,795 1234440 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:42,795 1234440 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:42,943 1234588 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/269/uv122wc1/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:42,943 1234588 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/269/uv122wc1/websocket'; against '/chat/**'
2017-07-11 17:56:42,943 1234588 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/269/uv122wc1/websocket has an empty filter list
2017-07-11 17:56:42,943 1234588 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/269/uv122wc1/websocket]
2017-07-11 17:56:42,943 1234588 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/269/uv122wc1/websocket
2017-07-11 17:56:42,943 1234588 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/269/uv122wc1/websocket]
2017-07-11 17:56:42,943 1234588 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/269/uv122wc1/websocket] are [/chat/**]
2017-07-11 17:56:42,943 1234588 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/269/uv122wc1/websocket] are {}
2017-07-11 17:56:42,944 1234589 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/269/uv122wc1/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:56:42,944 1234589 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/269/uv122wc1/websocket] is: -1
2017-07-11 17:56:42,944 1234589 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/269/uv122wc1/websocket
2017-07-11 17:56:42,945 1234590 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:42,945 1234590 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:42,946 1234591 [http-bio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=uv122wc1]
2017-07-11 17:56:42,968 1234613 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 17:56:42,968 1234613 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@5db8cd73] for JPA transaction
2017-07-11 17:56:42,969 1234614 [http-bio-8080-exec-4] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:42,969 1234614 [http-bio-8080-exec-4] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:42,975 1234620 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@758963f9]
2017-07-11 17:56:42,975 1234620 [http-bio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 17:56:42,976 1234621 [http-bio-8080-exec-4] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:42,976 1234621 [http-bio-8080-exec-4] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 17:56:42,976 1234621 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:42,976 1234621 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:42,976 1234621 [http-bio-8080-exec-4] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:42,976 1234621 [http-bio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:42,977 1234622 [http-bio-8080-exec-4] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:56:42,977 1234622 [http-bio-8080-exec-4] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:42,977 1234622 [http-bio-8080-exec-4] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@5db8cd73]
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 17:56:42,978 1234623 [http-bio-8080-exec-4] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 17:56:42,979 1234624 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@5db8cd73] after transaction
2017-07-11 17:56:42,979 1234624 [http-bio-8080-exec-4] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:42,979 1234624 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=uv122wc1
2017-07-11 17:56:42,984 1234629 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=uv122wc1
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:43,077 1234722 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:43,078 1234723 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:43,079 1234724 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:43,079 1234724 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:43,079 1234724 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:43,079 1234724 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:43,079 1234724 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:43,079 1234724 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:43,079 1234724 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:43,079 1234724 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:43,079 1234724 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:43,079 1234724 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:43,079 1234724 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:43,080 1234725 [http-bio-8080-exec-14] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:43,080 1234725 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:43,080 1234725 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:43,080 1234725 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:43,080 1234725 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:43,080 1234725 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:43,080 1234725 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:43,080 1234725 [http-bio-8080-exec-14] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:43,081 1234726 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:43,082 1234727 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:43,082 1234727 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:43,082 1234727 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:43,082 1234727 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:43,082 1234727 [http-bio-8080-exec-14] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:43,147 1234792 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:43,148 1234793 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 17:56:43,148 1234793 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:56:43,148 1234793 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:43,148 1234793 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 17:56:43,148 1234793 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:43,148 1234793 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 17:56:43,148 1234793 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:43,148 1234793 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 17:56:43,148 1234793 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:43,148 1234793 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:43,149 1234794 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:43,149 1234794 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:43,149 1234794 [http-bio-8080-exec-14] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:43,149 1234794 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:43,149 1234794 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:43,149 1234794 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 17:56:43,149 1234794 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:43,149 1234794 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 17:56:43,150 1234795 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:43,150 1234795 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 17:56:43,150 1234795 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:43,150 1234795 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 17:56:43,150 1234795 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:43,150 1234795 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:43,151 1234796 [http-bio-8080-exec-14] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:43,151 1234796 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:43,151 1234796 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:43,151 1234796 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:43,151 1234796 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:43,151 1234796 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:43,151 1234796 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:43,152 1234797 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 17:56:43,153 1234798 [http-bio-8080-exec-14] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:43,153 1234798 [http-bio-8080-exec-14] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 17:56:43,153 1234798 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 17:56:43,153 1234798 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:43,159 1234804 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:43,160 1234805 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 17:56:43,160 1234805 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:56:43,160 1234805 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 17:56:43,160 1234805 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 17:56:43,160 1234805 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 17:56:43,160 1234805 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 17:56:43,160 1234805 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 17:56:43,160 1234805 [http-bio-8080-exec-14] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:43,160 1234805 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:43,160 1234805 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:43,160 1234805 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:43,166 1234811 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:43,166 1234811 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:56:43,167 1234812 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:43,167 1234812 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:43,167 1234812 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:43,167 1234812 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 17:56:43,167 1234812 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:43,168 1234813 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:43,168 1234813 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:43,168 1234813 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:43,168 1234813 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:43,168 1234813 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:43,168 1234813 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:43,168 1234813 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:43,168 1234813 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:43,168 1234813 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:43,168 1234813 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:43,169 1234814 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:43,169 1234814 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:43,169 1234814 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:43,174 1234819 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:43,174 1234819 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:43,174 1234819 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:43,174 1234819 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:43,174 1234819 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:43,174 1234819 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:43,174 1234819 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:43,174 1234819 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:43,174 1234819 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:43,174 1234819 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:43,174 1234819 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:43,175 1234820 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:43,175 1234820 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:43,175 1234820 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:43,180 1234825 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:43,180 1234825 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:43,181 1234826 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:56:43,181 1234826 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:43,181 1234826 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:43,181 1234826 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:43,181 1234826 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:43,181 1234826 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:43,181 1234826 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:43,181 1234826 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:43,181 1234826 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:43,182 1234827 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:43,182 1234827 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:43,182 1234827 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:43,187 1234832 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:43,188 1234833 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:56:43,188 1234833 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:43,189 1234834 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:43,189 1234834 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:43,189 1234834 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:43,189 1234834 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:43,189 1234834 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:43,189 1234834 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:43,189 1234834 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:43,189 1234834 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:43,189 1234834 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:43,189 1234834 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:43,190 1234835 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:43,190 1234835 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:43,190 1234835 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:43,198 1234843 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:43,198 1234843 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:43,199 1234844 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:43,199 1234844 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:43,199 1234844 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:43,199 1234844 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:43,199 1234844 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:43,199 1234844 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:43,199 1234844 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:43,199 1234844 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:43,199 1234844 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:43,200 1234845 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:43,200 1234845 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:43,200 1234845 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:43,200 1234845 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:43,200 1234845 [http-bio-8080-exec-14] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:46,788 1238433 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [ci4tpu1x, orwyog5d]
2017-07-11 17:56:52,382 1244027 [http-bio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=uv122wc1] closed with CloseStatus[code=1000, reason=null]
2017-07-11 17:56:52,382 1244027 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session uv122wc1
2017-07-11 17:56:52,382 1244027 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=uv122wc1
2017-07-11 17:56:52,383 1244028 [clientOutboundChannel-49] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=uv122wc1}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=uv122wc1}]
2017-07-11 17:56:53,145 1244790 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,145 1244790 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:53,145 1244790 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,145 1244790 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:53,145 1244790 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,146 1244791 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:53,147 1244792 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:53,147 1244792 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:53,147 1244792 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:53,147 1244792 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:53,147 1244792 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:53,147 1244792 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:53,147 1244792 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:53,147 1244792 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:53,147 1244792 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:53,147 1244792 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:53,148 1244793 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:53,149 1244794 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:53,149 1244794 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:53,149 1244794 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:53,150 1244795 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:53,150 1244795 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,152 1244797 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:53,153 1244798 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:53,154 1244799 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:53,154 1244799 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:53,154 1244799 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:53,154 1244799 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:53,155 1244800 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:53,155 1244800 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:53,155 1244800 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:53,155 1244800 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:53,200 1244845 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,200 1244845 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,201 1244846 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:53,202 1244847 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:53,203 1244848 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 17:56:53,203 1244848 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 17:56:53,203 1244848 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 17:56:53,203 1244848 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:53,203 1244848 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 17:56:53,204 1244849 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:53,204 1244849 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 17:56:53,204 1244849 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 17:56:53,204 1244849 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,211 1244856 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:53,211 1244856 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 17:56:53,211 1244856 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:53,211 1244856 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:53,211 1244856 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:53,211 1244856 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:53,211 1244856 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:53,211 1244856 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,217 1244862 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,218 1244863 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 17:56:53,219 1244864 [http-bio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 17:56:53,220 1244865 [http-bio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 17:56:53,220 1244865 [http-bio-8080-exec-10] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:53,220 1244865 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:53,220 1244865 [http-bio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 17:56:53,220 1244865 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,220 1244865 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:53,220 1244865 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:53,220 1244865 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:53,220 1244865 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:53,220 1244865 [http-bio-8080-exec-10] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:53,221 1244866 [http-bio-8080-exec-10] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 17:56:53,221 1244866 [http-bio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 17:56:53,221 1244866 [http-bio-8080-exec-10] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,222 1244867 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:53,222 1244867 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:53,222 1244867 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:53,222 1244867 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:53,222 1244867 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:53,227 1244872 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:53,227 1244872 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 17:56:53,228 1244873 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 17:56:53,229 1244874 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 17:56:53,230 1244875 [http-bio-8080-exec-10] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:53,231 1244876 [http-bio-8080-exec-10] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:53,231 1244876 [http-bio-8080-exec-10] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:53,231 1244876 [http-bio-8080-exec-10] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,237 1244882 [http-bio-8080-exec-10] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 17:56:53,237 1244882 [http-bio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:56:53,238 1244883 [http-bio-8080-exec-10] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:53,238 1244883 [http-bio-8080-exec-10] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:56:53,238 1244883 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:53,238 1244883 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:53,238 1244883 [http-bio-8080-exec-10] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:53,238 1244883 [http-bio-8080-exec-10] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 17:56:53,238 1244883 [http-bio-8080-exec-10] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:53,239 1244884 [http-bio-8080-exec-10] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:53,239 1244884 [http-bio-8080-exec-10] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:53,239 1244884 [http-bio-8080-exec-10] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,244 1244889 [http-bio-8080-exec-10] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 17:56:53,245 1244890 [http-bio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:56:53,245 1244890 [http-bio-8080-exec-10] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:53,245 1244890 [http-bio-8080-exec-10] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:56:53,246 1244891 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:53,246 1244891 [http-bio-8080-exec-10] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:53,246 1244891 [http-bio-8080-exec-10] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:53,246 1244891 [http-bio-8080-exec-10] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 17:56:53,246 1244891 [http-bio-8080-exec-10] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:53,247 1244892 [http-bio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:53,248 1244893 [http-bio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:53,248 1244893 [http-bio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:53,248 1244893 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:53,248 1244893 [http-bio-8080-exec-10] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:53,257 1244902 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,257 1244902 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 17:56:53,257 1244902 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785013254 has an empty filter list
2017-07-11 17:56:53,258 1244903 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 17:56:53,258 1244903 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 17:56:53,258 1244903 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 17:56:53,258 1244903 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 17:56:53,258 1244903 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 17:56:53,258 1244903 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:56:53,258 1244903 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 17:56:53,258 1244903 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785013254
2017-07-11 17:56:53,258 1244903 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:53,258 1244903 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,302 1244947 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,303 1244948 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:53,304 1244949 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:53,304 1244949 [http-bio-8080-exec-14] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:53,304 1244949 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:53,304 1244949 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:53,304 1244949 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:53,304 1244949 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:53,304 1244949 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:53,304 1244949 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:53,304 1244949 [http-bio-8080-exec-14] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:53,304 1244949 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:53,305 1244950 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:53,305 1244950 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:53,305 1244950 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:53,305 1244950 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:53,305 1244950 [http-bio-8080-exec-14] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:53,360 1245005 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:53,361 1245006 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:53,362 1245007 [http-bio-8080-exec-14] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:53,363 1245008 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 17:56:53,363 1245008 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 17:56:53,363 1245008 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 17:56:53,363 1245008 [http-bio-8080-exec-14] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:53,363 1245008 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 17:56:53,363 1245008 [http-bio-8080-exec-14] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:53,363 1245008 [http-bio-8080-exec-14] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 17:56:53,364 1245009 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 17:56:53,364 1245009 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,371 1245016 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:53,371 1245016 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 17:56:53,371 1245016 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:56:53,371 1245016 [http-bio-8080-exec-14] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 17:56:53,371 1245016 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 17:56:53,371 1245016 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 17:56:53,371 1245016 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 17:56:53,372 1245017 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 17:56:53,372 1245017 [http-bio-8080-exec-14] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:53,372 1245017 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:53,372 1245017 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:53,372 1245017 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,378 1245023 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:53,378 1245023 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:56:53,379 1245024 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:53,379 1245024 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:53,379 1245024 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:53,379 1245024 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 17:56:53,379 1245024 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:53,379 1245024 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:53,379 1245024 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:53,379 1245024 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:53,379 1245024 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:53,379 1245024 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:53,380 1245025 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:53,380 1245025 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:53,380 1245025 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:53,380 1245025 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:53,380 1245025 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:53,380 1245025 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:53,380 1245025 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:53,381 1245026 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,387 1245032 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,387 1245032 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:53,387 1245032 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,388 1245033 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:53,388 1245033 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,388 1245033 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:53,388 1245033 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,388 1245033 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:53,388 1245033 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:53,388 1245033 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:53,388 1245033 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:53,389 1245034 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:53,389 1245034 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:53,389 1245034 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,391 1245036 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/321/dgwwzhef/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:53,391 1245036 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/321/dgwwzhef/websocket'; against '/chat/**'
2017-07-11 17:56:53,391 1245036 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/321/dgwwzhef/websocket has an empty filter list
2017-07-11 17:56:53,391 1245036 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/321/dgwwzhef/websocket]
2017-07-11 17:56:53,391 1245036 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/321/dgwwzhef/websocket
2017-07-11 17:56:53,391 1245036 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/321/dgwwzhef/websocket]
2017-07-11 17:56:53,391 1245036 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/321/dgwwzhef/websocket] are [/chat/**]
2017-07-11 17:56:53,391 1245036 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/321/dgwwzhef/websocket] are {}
2017-07-11 17:56:53,391 1245036 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/321/dgwwzhef/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:56:53,391 1245036 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/321/dgwwzhef/websocket] is: -1
2017-07-11 17:56:53,391 1245036 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/321/dgwwzhef/websocket
2017-07-11 17:56:53,393 1245038 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:53,393 1245038 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:53,393 1245038 [http-bio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dgwwzhef]
2017-07-11 17:56:53,395 1245040 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:53,396 1245041 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:53,396 1245041 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:56:53,396 1245041 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:53,396 1245041 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:53,397 1245042 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:53,397 1245042 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:53,397 1245042 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:53,397 1245042 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:53,397 1245042 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:53,397 1245042 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:53,397 1245042 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:53,398 1245043 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:53,398 1245043 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,403 1245048 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:53,404 1245049 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:56:53,405 1245050 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:53,405 1245050 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:53,406 1245051 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:53,406 1245051 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:53,406 1245051 [http-bio-8080-exec-14] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:53,406 1245051 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:53,406 1245051 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:53,406 1245051 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:53,406 1245051 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:53,406 1245051 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:53,406 1245051 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:53,407 1245052 [http-bio-8080-exec-14] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:53,407 1245052 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:53,407 1245052 [http-bio-8080-exec-14] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,414 1245059 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,414 1245059 [http-bio-8080-exec-14] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:53,416 1245061 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,417 1245062 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:53,417 1245062 [http-bio-8080-exec-14] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,417 1245062 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:53,417 1245062 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:53,417 1245062 [http-bio-8080-exec-14] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:53,417 1245062 [http-bio-8080-exec-14] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:53,419 1245064 [http-bio-8080-exec-14] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:53,419 1245064 [http-bio-8080-exec-14] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:53,423 1245068 [http-bio-8080-exec-14] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:53,423 1245068 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:53,423 1245068 [http-bio-8080-exec-14] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:53,423 1245068 [http-bio-8080-exec-14] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:53,423 1245068 [http-bio-8080-exec-14] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:53,456 1245101 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 17:56:53,457 1245102 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@7e482710] for JPA transaction
2017-07-11 17:56:53,457 1245102 [http-bio-8080-exec-4] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:53,457 1245102 [http-bio-8080-exec-4] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:53,463 1245108 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@69e63080]
2017-07-11 17:56:53,464 1245109 [http-bio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 17:56:53,465 1245110 [http-bio-8080-exec-4] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:53,465 1245110 [http-bio-8080-exec-4] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 17:56:53,465 1245110 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:53,465 1245110 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:53,465 1245110 [http-bio-8080-exec-4] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:53,465 1245110 [http-bio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@7e482710]
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 17:56:53,467 1245112 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 17:56:53,468 1245113 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 17:56:53,468 1245113 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 17:56:53,468 1245113 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 17:56:53,468 1245113 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 17:56:53,468 1245113 [http-bio-8080-exec-4] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 17:56:53,468 1245113 [http-bio-8080-exec-4] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 17:56:53,468 1245113 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@7e482710] after transaction
2017-07-11 17:56:53,469 1245114 [http-bio-8080-exec-4] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:53,469 1245114 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=dgwwzhef
2017-07-11 17:56:53,496 1245141 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=dgwwzhef
2017-07-11 17:56:58,297 1249942 [http-bio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dgwwzhef] closed with CloseStatus[code=1000, reason=null]
2017-07-11 17:56:58,297 1249942 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dgwwzhef
2017-07-11 17:56:58,297 1249942 [clientInboundChannel-30] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dgwwzhef
2017-07-11 17:56:58,297 1249942 [clientOutboundChannel-52] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=dgwwzhef}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=dgwwzhef}]
2017-07-11 17:56:58,965 1250610 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:58,966 1250611 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:58,967 1250612 [http-bio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:58,968 1250613 [http-bio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:58,968 1250613 [http-bio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:58,968 1250613 [http-bio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:58,968 1250613 [http-bio-8080-exec-10] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:58,968 1250613 [http-bio-8080-exec-10] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:58,970 1250615 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:58,971 1250616 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:58,972 1250617 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:58,972 1250617 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:58,972 1250617 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:58,972 1250617 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:58,972 1250617 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:58,972 1250617 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:58,972 1250617 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:58,972 1250617 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:58,972 1250617 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:58,973 1250618 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:58,973 1250618 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:58,973 1250618 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:58,973 1250618 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:58,973 1250618 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:59,008 1250653 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 17:56:59,009 1250654 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 17:56:59,010 1250655 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 17:56:59,010 1250655 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:59,010 1250655 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 17:56:59,010 1250655 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:59,010 1250655 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 17:56:59,011 1250656 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 17:56:59,011 1250656 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,018 1250663 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:59,018 1250663 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 17:56:59,018 1250663 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:59,018 1250663 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:59,018 1250663 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:59,018 1250663 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:59,018 1250663 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:59,018 1250663 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,025 1250670 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,025 1250670 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:59,026 1250671 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,026 1250671 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:59,026 1250671 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,026 1250671 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:59,026 1250671 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,026 1250671 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:59,026 1250671 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:59,026 1250671 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:59,026 1250671 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:59,027 1250672 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:59,028 1250673 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:59,028 1250673 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:59,028 1250673 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:59,028 1250673 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:59,030 1250675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:59,031 1250676 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:56:59,032 1250677 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:59,032 1250677 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:59,032 1250677 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:59,032 1250677 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:59,032 1250677 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 17:56:59,032 1250677 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 17:56:59,032 1250677 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 17:56:59,032 1250677 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:59,032 1250677 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 17:56:59,032 1250677 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:59,033 1250678 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 17:56:59,033 1250678 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 17:56:59,033 1250678 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 17:56:59,041 1250686 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 17:56:59,042 1250687 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 17:56:59,043 1250688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:59,044 1250689 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,052 1250697 [http-bio-8080-exec-2] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 17:56:59,052 1250697 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:56:59,054 1250699 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:59,055 1250700 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:56:59,055 1250700 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:59,055 1250700 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:59,055 1250700 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:59,055 1250700 [http-bio-8080-exec-2] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 17:56:59,056 1250701 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:59,057 1250702 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:59,057 1250702 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:59,057 1250702 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,096 1250741 [http-bio-8080-exec-2] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 17:56:59,096 1250741 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:56:59,097 1250742 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:59,097 1250742 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:56:59,098 1250743 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:59,098 1250743 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:59,098 1250743 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:59,105 1250750 [http-bio-8080-exec-2] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 17:56:59,106 1250751 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:59,108 1250753 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:59,108 1250753 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:59,109 1250754 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:59,109 1250754 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:59,109 1250754 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:59,110 1250755 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785019107 has an empty filter list
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785019107
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:59,111 1250756 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:59,120 1250765 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:59,121 1250766 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:59,122 1250767 [http-bio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:56:59,122 1250767 [http-bio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:56:59,122 1250767 [http-bio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:56:59,122 1250767 [http-bio-8080-exec-6] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:56:59,122 1250767 [http-bio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:56:59,123 1250768 [http-bio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:56:59,123 1250768 [http-bio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:59,123 1250768 [http-bio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:59,123 1250768 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:59,123 1250768 [http-bio-8080-exec-6] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:56:59,227 1250872 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 17:56:59,228 1250873 [http-bio-8080-exec-6] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:56:59,229 1250874 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:56:59,229 1250874 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:56:59,229 1250874 [http-bio-8080-exec-6] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:56:59,229 1250874 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:56:59,229 1250874 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:56:59,229 1250874 [http-bio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 17:56:59,229 1250874 [http-bio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 17:56:59,229 1250874 [http-bio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 17:56:59,229 1250874 [http-bio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 17:56:59,229 1250874 [http-bio-8080-exec-6] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:56:59,229 1250874 [http-bio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 17:56:59,230 1250875 [http-bio-8080-exec-6] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:56:59,230 1250875 [http-bio-8080-exec-6] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 17:56:59,231 1250876 [http-bio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 17:56:59,231 1250876 [http-bio-8080-exec-6] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,237 1250882 [http-bio-8080-exec-6] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:59,237 1250882 [http-bio-8080-exec-6] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 17:56:59,237 1250882 [http-bio-8080-exec-6] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:56:59,237 1250882 [http-bio-8080-exec-6] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 17:56:59,237 1250882 [http-bio-8080-exec-6] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 17:56:59,237 1250882 [http-bio-8080-exec-6] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 17:56:59,237 1250882 [http-bio-8080-exec-6] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 17:56:59,238 1250883 [http-bio-8080-exec-6] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 17:56:59,238 1250883 [http-bio-8080-exec-6] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:59,238 1250883 [http-bio-8080-exec-6] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:59,238 1250883 [http-bio-8080-exec-6] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:59,238 1250883 [http-bio-8080-exec-6] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,245 1250890 [http-bio-8080-exec-6] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:59,245 1250890 [http-bio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:59,246 1250891 [http-bio-8080-exec-6] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:59,247 1250892 [http-bio-8080-exec-6] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:59,247 1250892 [http-bio-8080-exec-6] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:59,247 1250892 [http-bio-8080-exec-6] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,256 1250901 [http-bio-8080-exec-6] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,256 1250901 [http-bio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:59,257 1250902 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,257 1250902 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:59,257 1250902 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,257 1250902 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:59,257 1250902 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,257 1250902 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:59,257 1250902 [http-bio-8080-exec-6] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:59,257 1250902 [http-bio-8080-exec-6] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:59,257 1250902 [http-bio-8080-exec-6] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:59,258 1250903 [http-bio-8080-exec-6] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:59,258 1250903 [http-bio-8080-exec-6] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:59,258 1250903 [http-bio-8080-exec-6] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,264 1250909 [http-bio-8080-exec-6] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:59,265 1250910 [http-bio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:59,266 1250911 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:56:59,266 1250911 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:59,266 1250911 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:59,266 1250911 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:59,266 1250911 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:59,266 1250911 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:59,266 1250911 [http-bio-8080-exec-6] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:59,266 1250911 [http-bio-8080-exec-6] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:59,266 1250911 [http-bio-8080-exec-6] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:59,267 1250912 [http-bio-8080-exec-6] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:59,267 1250912 [http-bio-8080-exec-6] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:59,267 1250912 [http-bio-8080-exec-6] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,273 1250918 [http-bio-8080-exec-6] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:59,273 1250918 [http-bio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:56:59,274 1250919 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:59,274 1250919 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:59,275 1250920 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:59,275 1250920 [http-bio-8080-exec-6] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:56:59,275 1250920 [http-bio-8080-exec-6] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:56:59,275 1250920 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:59,275 1250920 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:56:59,275 1250920 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:56:59,275 1250920 [http-bio-8080-exec-6] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:59,275 1250920 [http-bio-8080-exec-6] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:59,275 1250920 [http-bio-8080-exec-6] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:59,276 1250921 [http-bio-8080-exec-6] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:56:59,276 1250921 [http-bio-8080-exec-6] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:59,276 1250921 [http-bio-8080-exec-6] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,283 1250928 [http-bio-8080-exec-6] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,283 1250928 [http-bio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:59,284 1250929 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,284 1250929 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:59,284 1250929 [http-bio-8080-exec-6] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,284 1250929 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:59,284 1250929 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:56:59,284 1250929 [http-bio-8080-exec-6] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:59,284 1250929 [http-bio-8080-exec-6] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:59,284 1250929 [http-bio-8080-exec-6] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:59,284 1250929 [http-bio-8080-exec-6] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:59,286 1250931 [http-bio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:56:59,286 1250931 [http-bio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:59,286 1250931 [http-bio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:59,286 1250931 [http-bio-8080-exec-6] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:56:59,286 1250931 [http-bio-8080-exec-6] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:56:59,290 1250935 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/551/hgbmeidp/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:56:59,290 1250935 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/551/hgbmeidp/websocket'; against '/chat/**'
2017-07-11 17:56:59,291 1250936 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/551/hgbmeidp/websocket has an empty filter list
2017-07-11 17:56:59,291 1250936 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/551/hgbmeidp/websocket]
2017-07-11 17:56:59,291 1250936 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/551/hgbmeidp/websocket
2017-07-11 17:56:59,291 1250936 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/551/hgbmeidp/websocket]
2017-07-11 17:56:59,291 1250936 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/551/hgbmeidp/websocket] are [/chat/**]
2017-07-11 17:56:59,291 1250936 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/551/hgbmeidp/websocket] are {}
2017-07-11 17:56:59,291 1250936 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/551/hgbmeidp/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:56:59,291 1250936 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/551/hgbmeidp/websocket] is: -1
2017-07-11 17:56:59,291 1250936 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/551/hgbmeidp/websocket
2017-07-11 17:56:59,292 1250937 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:56:59,292 1250937 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:56:59,293 1250938 [http-bio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hgbmeidp]
2017-07-11 17:56:59,347 1250992 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 17:56:59,347 1250992 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@14affba0] for JPA transaction
2017-07-11 17:56:59,347 1250992 [http-bio-8080-exec-4] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:56:59,347 1250992 [http-bio-8080-exec-4] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:56:59,357 1251002 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7bae2d2]
2017-07-11 17:56:59,359 1251004 [http-bio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 17:56:59,360 1251005 [http-bio-8080-exec-4] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:56:59,360 1251005 [http-bio-8080-exec-4] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 17:56:59,360 1251005 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:56:59,361 1251006 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:56:59,361 1251006 [http-bio-8080-exec-4] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:59,361 1251006 [http-bio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:56:59,364 1251009 [http-bio-8080-exec-4] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:56:59,364 1251009 [http-bio-8080-exec-4] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:56:59,364 1251009 [http-bio-8080-exec-4] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@14affba0]
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 17:56:59,365 1251010 [http-bio-8080-exec-4] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 17:56:59,370 1251015 [http-bio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@14affba0] after transaction
2017-07-11 17:56:59,370 1251015 [http-bio-8080-exec-4] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:56:59,371 1251016 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=hgbmeidp
2017-07-11 17:56:59,396 1251041 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=hgbmeidp
2017-07-11 17:57:01,790 1253435 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [uv122wc1]
2017-07-11 17:57:06,789 1258434 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [dgwwzhef]
2017-07-11 17:58:06,989 1318634 [http-bio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hgbmeidp] closed with CloseStatus[code=1000, reason=null]
2017-07-11 17:58:06,990 1318635 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hgbmeidp
2017-07-11 17:58:06,991 1318636 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hgbmeidp
2017-07-11 17:58:06,992 1318637 [clientOutboundChannel-58] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=hgbmeidp}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=hgbmeidp}]
2017-07-11 17:58:07,876 1319521 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:07,877 1319522 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:07,878 1319523 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:07,879 1319524 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:07,879 1319524 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:07,879 1319524 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:07,879 1319524 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:07,879 1319524 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:58:07,879 1319524 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:58:07,879 1319524 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:58:07,879 1319524 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:58:07,879 1319524 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:58:07,880 1319525 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:58:07,880 1319525 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:07,880 1319525 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:07,881 1319526 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:07,881 1319526 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:07,882 1319527 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:07,883 1319528 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:07,884 1319529 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:07,884 1319529 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:07,884 1319529 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:07,884 1319529 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:07,884 1319529 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:07,884 1319529 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:58:07,884 1319529 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:58:07,884 1319529 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:58:07,884 1319529 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:58:07,884 1319529 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:58:07,885 1319530 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:58:07,885 1319530 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:07,885 1319530 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:07,885 1319530 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:07,885 1319530 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 17:58:07,936 1319581 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:07,937 1319582 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:07,938 1319583 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:07,938 1319583 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:07,938 1319583 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:07,938 1319583 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:07,938 1319583 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 17:58:07,938 1319583 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 17:58:07,938 1319583 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 17:58:07,938 1319583 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:58:07,938 1319583 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 17:58:07,939 1319584 [http-bio-8080-exec-9] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:58:07,939 1319584 [http-bio-8080-exec-9] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 17:58:07,939 1319584 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 17:58:07,940 1319585 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:07,948 1319593 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:07,948 1319593 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 17:58:07,948 1319593 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:07,949 1319594 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:07,949 1319594 [http-bio-8080-exec-9] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:07,949 1319594 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:07,949 1319594 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:07,949 1319594 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:07,954 1319599 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-9] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:07,955 1319600 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-9] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:58:07,956 1319601 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 17:58:07,957 1319602 [http-bio-8080-exec-1] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:58:07,957 1319602 [http-bio-8080-exec-1] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 17:58:07,958 1319603 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 17:58:07,958 1319603 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:07,958 1319603 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:58:07,958 1319603 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:07,958 1319603 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:07,958 1319603 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:07,958 1319603 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:07,966 1319611 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:07,967 1319612 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 17:58:07,967 1319612 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:58:07,967 1319612 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 17:58:07,968 1319613 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 17:58:07,968 1319613 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 17:58:07,968 1319613 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 17:58:07,968 1319613 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 17:58:07,968 1319613 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 17:58:07,968 1319613 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 17:58:07,969 1319614 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 17:58:07,969 1319614 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 17:58:07,969 1319614 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 17:58:07,969 1319614 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 17:58:07,970 1319615 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 17:58:07,970 1319615 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 17:58:07,970 1319615 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 17:58:07,970 1319615 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 17:58:07,970 1319615 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 17:58:07,970 1319615 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 17:58:07,970 1319615 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 17:58:07,970 1319615 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 17:58:07,971 1319616 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 17:58:07,971 1319616 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 17:58:07,971 1319616 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 17:58:07,971 1319616 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 17:58:07,971 1319616 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 17:58:07,971 1319616 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 17:58:07,972 1319617 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 17:58:07,973 1319618 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 17:58:07,973 1319618 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 17:58:07,973 1319618 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 17:58:07,973 1319618 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 17:58:07,973 1319618 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 17:58:07,974 1319619 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 17:58:07,974 1319619 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 17:58:07,974 1319619 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 17:58:07,974 1319619 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 17:58:07,974 1319619 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 17:58:07,974 1319619 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 17:58:07,974 1319619 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 17:58:07,974 1319619 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 17:58:07,974 1319619 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 17:58:07,974 1319619 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 17:58:07,975 1319620 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 17:58:07,975 1319620 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 17:58:07,975 1319620 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 17:58:07,975 1319620 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 17:58:07,975 1319620 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 17:58:07,975 1319620 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 17:58:07,975 1319620 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 17:58:07,975 1319620 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 17:58:07,975 1319620 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 17:58:07,975 1319620 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 17:58:07,975 1319620 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 17:58:07,976 1319621 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 17:58:07,977 1319622 [http-bio-8080-exec-1] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:07,977 1319622 [http-bio-8080-exec-1] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:07,977 1319622 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:07,977 1319622 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:07,986 1319631 [http-bio-8080-exec-1] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 17:58:07,987 1319632 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:58:07,989 1319634 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:07,989 1319634 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:58:07,990 1319635 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:07,990 1319635 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:07,990 1319635 [http-bio-8080-exec-1] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:07,990 1319635 [http-bio-8080-exec-1] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 17:58:07,990 1319635 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:07,992 1319637 [http-bio-8080-exec-1] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:07,993 1319638 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:07,993 1319638 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:08,004 1319649 [http-bio-8080-exec-1] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 17:58:08,005 1319650 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:58:08,007 1319652 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:08,007 1319652 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:58:08,007 1319652 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:58:08,007 1319652 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:58:08,008 1319653 [http-bio-8080-exec-1] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:08,008 1319653 [http-bio-8080-exec-1] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 17:58:08,008 1319653 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:08,009 1319654 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:58:08,009 1319654 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:08,009 1319654 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:08,009 1319654 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:08,009 1319654 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:08,078 1319723 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:58:08,079 1319724 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:58:08,080 1319725 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:58:08,080 1319725 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:58:08,080 1319725 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:58:08,081 1319726 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:58:08,081 1319726 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:08,081 1319726 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:08,081 1319726 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:08,081 1319726 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:08,124 1319769 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:58:08,125 1319770 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 17:58:08,126 1319771 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:58:08,126 1319771 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 17:58:08,126 1319771 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 17:58:08,126 1319771 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:08,133 1319778 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:08,133 1319778 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 17:58:08,133 1319778 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:58:08,133 1319778 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 17:58:08,133 1319778 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 17:58:08,133 1319778 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 17:58:08,133 1319778 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 17:58:08,133 1319778 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 17:58:08,133 1319778 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:08,134 1319779 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:08,134 1319779 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:08,134 1319779 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:08,139 1319784 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:08,140 1319785 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:58:08,140 1319785 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:08,140 1319785 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:08,141 1319786 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:08,143 1319788 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:08,143 1319788 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:08,143 1319788 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:08,149 1319794 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:08,149 1319794 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:08,151 1319796 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:58:08,151 1319796 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:08,151 1319796 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:08,151 1319796 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:08,151 1319796 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:08,151 1319796 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:08,151 1319796 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:08,151 1319796 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:08,151 1319796 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:08,155 1319800 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:08,155 1319800 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:08,155 1319800 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:08,166 1319811 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:08,166 1319811 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:08,169 1319814 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:58:08,169 1319814 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:08,169 1319814 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:08,169 1319814 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:08,169 1319814 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:08,169 1319814 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:08,169 1319814 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:08,169 1319814 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:08,169 1319814 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:08,170 1319815 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:08,170 1319815 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:08,171 1319816 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:08,177 1319822 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:08,177 1319822 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:58:08,178 1319823 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:08,178 1319823 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:08,178 1319823 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:08,178 1319823 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:08,178 1319823 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:08,178 1319823 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:08,178 1319823 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:08,178 1319823 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:08,178 1319823 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:08,178 1319823 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:08,178 1319823 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:08,179 1319824 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:08,179 1319824 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:08,179 1319824 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:08,188 1319833 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:08,188 1319833 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:08,191 1319836 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:58:08,191 1319836 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:08,192 1319837 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:08,192 1319837 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:08,192 1319837 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:08,192 1319837 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:08,192 1319837 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:08,192 1319837 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:08,192 1319837 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:08,196 1319841 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:58:08,197 1319842 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:08,197 1319842 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:08,197 1319842 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:08,197 1319842 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:08,262 1319907 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:08,262 1319907 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 17:58:08,262 1319907 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785088254 has an empty filter list
2017-07-11 17:58:08,262 1319907 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 17:58:08,262 1319907 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 17:58:08,263 1319908 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 17:58:08,263 1319908 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 17:58:08,263 1319908 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 17:58:08,263 1319908 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:58:08,263 1319908 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 17:58:08,264 1319909 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785088254
2017-07-11 17:58:08,265 1319910 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:08,265 1319910 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:08,584 1320229 [http-bio-8080-exec-12] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/966/z1uqmks4/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:08,584 1320229 [http-bio-8080-exec-12] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/966/z1uqmks4/websocket'; against '/chat/**'
2017-07-11 17:58:08,584 1320229 [http-bio-8080-exec-12] DEBUG o.s.security.web.FilterChainProxy - /chat/966/z1uqmks4/websocket has an empty filter list
2017-07-11 17:58:08,585 1320230 [http-bio-8080-exec-12] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/966/z1uqmks4/websocket]
2017-07-11 17:58:08,585 1320230 [http-bio-8080-exec-12] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/966/z1uqmks4/websocket
2017-07-11 17:58:08,585 1320230 [http-bio-8080-exec-12] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/966/z1uqmks4/websocket]
2017-07-11 17:58:08,585 1320230 [http-bio-8080-exec-12] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/966/z1uqmks4/websocket] are [/chat/**]
2017-07-11 17:58:08,585 1320230 [http-bio-8080-exec-12] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/966/z1uqmks4/websocket] are {}
2017-07-11 17:58:08,585 1320230 [http-bio-8080-exec-12] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/966/z1uqmks4/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:58:08,585 1320230 [http-bio-8080-exec-12] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/966/z1uqmks4/websocket] is: -1
2017-07-11 17:58:08,585 1320230 [http-bio-8080-exec-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/966/z1uqmks4/websocket
2017-07-11 17:58:08,587 1320232 [http-bio-8080-exec-12] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:08,587 1320232 [http-bio-8080-exec-12] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:08,587 1320232 [http-bio-8080-exec-12] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=z1uqmks4]
2017-07-11 17:58:08,761 1320406 [http-bio-8080-exec-12] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 17:58:08,762 1320407 [http-bio-8080-exec-12] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@4f3bd016] for JPA transaction
2017-07-11 17:58:08,762 1320407 [http-bio-8080-exec-12] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:08,762 1320407 [http-bio-8080-exec-12] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:08,770 1320415 [http-bio-8080-exec-12] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4918b4e4]
2017-07-11 17:58:08,771 1320416 [http-bio-8080-exec-12] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 17:58:08,774 1320419 [http-bio-8080-exec-12] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:08,774 1320419 [http-bio-8080-exec-12] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 17:58:08,774 1320419 [http-bio-8080-exec-12] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:58:08,774 1320419 [http-bio-8080-exec-12] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:58:08,775 1320420 [http-bio-8080-exec-12] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:08,775 1320420 [http-bio-8080-exec-12] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:08,779 1320424 [http-bio-8080-exec-12] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:58:08,780 1320425 [http-bio-8080-exec-12] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:08,780 1320425 [http-bio-8080-exec-12] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:08,780 1320425 [http-bio-8080-exec-12] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:08,780 1320425 [http-bio-8080-exec-12] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:08,780 1320425 [http-bio-8080-exec-12] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:08,781 1320426 [http-bio-8080-exec-12] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:08,781 1320426 [http-bio-8080-exec-12] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:08,781 1320426 [http-bio-8080-exec-12] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 17:58:08,781 1320426 [http-bio-8080-exec-12] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@4f3bd016]
2017-07-11 17:58:08,781 1320426 [http-bio-8080-exec-12] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:08,781 1320426 [http-bio-8080-exec-12] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 17:58:08,781 1320426 [http-bio-8080-exec-12] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 17:58:08,781 1320426 [http-bio-8080-exec-12] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 17:58:08,781 1320426 [http-bio-8080-exec-12] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 17:58:08,782 1320427 [http-bio-8080-exec-12] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 17:58:08,784 1320429 [http-bio-8080-exec-12] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 17:58:08,784 1320429 [http-bio-8080-exec-12] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 17:58:08,784 1320429 [http-bio-8080-exec-12] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 17:58:08,784 1320429 [http-bio-8080-exec-12] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 17:58:08,786 1320431 [http-bio-8080-exec-12] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@4f3bd016] after transaction
2017-07-11 17:58:08,786 1320431 [http-bio-8080-exec-12] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:08,787 1320432 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=z1uqmks4
2017-07-11 17:58:08,829 1320474 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=z1uqmks4
2017-07-11 17:58:10,747 1322392 [http-bio-8080-exec-12] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=z1uqmks4] closed with CloseStatus[code=1000, reason=null]
2017-07-11 17:58:10,747 1322392 [http-bio-8080-exec-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session z1uqmks4
2017-07-11 17:58:10,748 1322393 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=z1uqmks4
2017-07-11 17:58:10,750 1322395 [clientOutboundChannel-60] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=z1uqmks4}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=z1uqmks4}]
2017-07-11 17:58:11,394 1323039 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:11,395 1323040 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:58:11,396 1323041 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:58:11,397 1323042 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:58:11,397 1323042 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:11,397 1323042 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:11,397 1323042 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:11,397 1323042 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:11,398 1323043 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,398 1323043 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:58:11,398 1323043 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,398 1323043 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:11,398 1323043 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:58:11,398 1323043 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:11,398 1323043 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:58:11,398 1323043 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:11,398 1323043 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:58:11,398 1323043 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:11,399 1323044 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:58:11,400 1323045 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:58:11,401 1323046 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:58:11,402 1323047 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:58:11,402 1323047 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:11,402 1323047 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:11,402 1323047 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:11,402 1323047 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 17:58:11,444 1323089 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,445 1323090 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:11,446 1323091 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:11,446 1323091 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:11,446 1323091 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:11,446 1323091 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:11,446 1323091 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:11,446 1323091 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 17:58:11,446 1323091 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 17:58:11,446 1323091 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 17:58:11,446 1323091 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:58:11,446 1323091 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 17:58:11,447 1323092 [http-bio-8080-exec-9] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:58:11,447 1323092 [http-bio-8080-exec-9] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 17:58:11,447 1323092 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 17:58:11,447 1323092 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,454 1323099 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:11,455 1323100 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 17:58:11,455 1323100 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:11,455 1323100 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:11,455 1323100 [http-bio-8080-exec-9] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:11,455 1323100 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:11,455 1323100 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:11,455 1323100 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,461 1323106 [http-bio-8080-exec-9] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,461 1323106 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:11,462 1323107 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,462 1323107 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:11,462 1323107 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,462 1323107 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:11,462 1323107 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,462 1323107 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:11,462 1323107 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:11,462 1323107 [http-bio-8080-exec-9] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:11,462 1323107 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:11,463 1323108 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:58:11,463 1323108 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:11,463 1323108 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:11,463 1323108 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:11,463 1323108 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,469 1323114 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:11,470 1323115 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:11,471 1323116 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:11,471 1323116 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:11,471 1323116 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:11,471 1323116 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:11,471 1323116 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 17:58:11,471 1323116 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 17:58:11,471 1323116 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 17:58:11,471 1323116 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:58:11,471 1323116 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 17:58:11,472 1323117 [http-bio-8080-exec-9] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:58:11,472 1323117 [http-bio-8080-exec-9] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 17:58:11,472 1323117 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 17:58:11,472 1323117 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 17:58:11,479 1323124 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 17:58:11,480 1323125 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:11,481 1323126 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,487 1323132 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 17:58:11,487 1323132 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:58:11,488 1323133 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:11,488 1323133 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:58:11,488 1323133 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:11,488 1323133 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:11,488 1323133 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:11,488 1323133 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 17:58:11,488 1323133 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:11,489 1323134 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:11,489 1323134 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:11,489 1323134 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,495 1323140 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 17:58:11,495 1323140 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:58:11,495 1323140 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:11,495 1323140 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:58:11,495 1323140 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:58:11,495 1323140 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:58:11,495 1323140 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:11,496 1323141 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 17:58:11,496 1323141 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:11,497 1323142 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:58:11,497 1323142 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:11,497 1323142 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:11,497 1323142 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:11,497 1323142 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:11,515 1323160 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,515 1323160 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:58:11,515 1323160 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,515 1323160 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:11,515 1323160 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,516 1323161 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785091511 has an empty filter list
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:11,517 1323162 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 17:58:11,518 1323163 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:11,518 1323163 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 17:58:11,518 1323163 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,518 1323163 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 17:58:11,518 1323163 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:58:11,518 1323163 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:58:11,518 1323163 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,518 1323163 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 17:58:11,518 1323163 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:11,519 1323164 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785091511
2017-07-11 17:58:11,519 1323164 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:11,519 1323164 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:11,519 1323164 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:11,519 1323164 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:11,519 1323164 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:11,520 1323165 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:11,520 1323165 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:11,520 1323165 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:58:11,520 1323165 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:58:11,520 1323165 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:58:11,520 1323165 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:58:11,520 1323165 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:58:11,521 1323166 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:58:11,521 1323166 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:11,521 1323166 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:11,521 1323166 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:11,521 1323166 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:11,575 1323220 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:11,576 1323221 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:11,577 1323222 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:11,577 1323222 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:11,577 1323222 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:11,577 1323222 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:11,577 1323222 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 17:58:11,577 1323222 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 17:58:11,577 1323222 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 17:58:11,577 1323222 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:58:11,577 1323222 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 17:58:11,578 1323223 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:58:11,578 1323223 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 17:58:11,578 1323223 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 17:58:11,578 1323223 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,586 1323231 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:11,587 1323232 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 17:58:11,587 1323232 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:58:11,587 1323232 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 17:58:11,587 1323232 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 17:58:11,587 1323232 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 17:58:11,587 1323232 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 17:58:11,587 1323232 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 17:58:11,588 1323233 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:11,589 1323234 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:11,589 1323234 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:11,589 1323234 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,596 1323241 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:11,596 1323241 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:11,597 1323242 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:11,598 1323243 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:11,598 1323243 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:11,598 1323243 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,604 1323249 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,604 1323249 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:11,605 1323250 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,605 1323250 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:11,605 1323250 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,605 1323250 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:11,605 1323250 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,605 1323250 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:11,605 1323250 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:11,605 1323250 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:11,605 1323250 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:11,606 1323251 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:11,606 1323251 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:11,606 1323251 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,612 1323257 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:11,612 1323257 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:11,613 1323258 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:58:11,613 1323258 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:11,613 1323258 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:11,613 1323258 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:11,613 1323258 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:11,613 1323258 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:11,613 1323258 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:11,613 1323258 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:11,613 1323258 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:11,614 1323259 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:11,614 1323259 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:11,614 1323259 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,620 1323265 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:11,620 1323265 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:58:11,621 1323266 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:11,621 1323266 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:11,621 1323266 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:11,622 1323267 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:11,622 1323267 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:11,622 1323267 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:11,622 1323267 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:11,622 1323267 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:11,622 1323267 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:11,622 1323267 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:11,622 1323267 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:11,623 1323268 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:11,623 1323268 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:11,623 1323268 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,629 1323274 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,630 1323275 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:11,630 1323275 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,630 1323275 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:11,630 1323275 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,631 1323276 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:11,631 1323276 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:11,631 1323276 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:11,631 1323276 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:11,631 1323276 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:11,631 1323276 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:11,632 1323277 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:58:11,633 1323278 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:11,633 1323278 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:11,633 1323278 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:11,633 1323278 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:11,753 1323398 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/866/dhcl3xgg/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:11,753 1323398 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/866/dhcl3xgg/websocket'; against '/chat/**'
2017-07-11 17:58:11,753 1323398 [http-bio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - /chat/866/dhcl3xgg/websocket has an empty filter list
2017-07-11 17:58:11,753 1323398 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/866/dhcl3xgg/websocket]
2017-07-11 17:58:11,754 1323399 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/866/dhcl3xgg/websocket
2017-07-11 17:58:11,755 1323400 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/866/dhcl3xgg/websocket]
2017-07-11 17:58:11,755 1323400 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/866/dhcl3xgg/websocket] are [/chat/**]
2017-07-11 17:58:11,755 1323400 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/866/dhcl3xgg/websocket] are {}
2017-07-11 17:58:11,756 1323401 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/866/dhcl3xgg/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:58:11,756 1323401 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/866/dhcl3xgg/websocket] is: -1
2017-07-11 17:58:11,758 1323403 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/866/dhcl3xgg/websocket
2017-07-11 17:58:11,759 1323404 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:11,759 1323404 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:11,759 1323404 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dhcl3xgg]
2017-07-11 17:58:11,773 1323418 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 17:58:11,773 1323418 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@38e8e33e] for JPA transaction
2017-07-11 17:58:11,773 1323418 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:11,773 1323418 [http-bio-8080-exec-8] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:11,780 1323425 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@67f7825c]
2017-07-11 17:58:11,780 1323425 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 17:58:11,781 1323426 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:11,781 1323426 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 17:58:11,781 1323426 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:58:11,781 1323426 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:58:11,781 1323426 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:11,781 1323426 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:11,781 1323426 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:58:11,781 1323426 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:11,781 1323426 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@38e8e33e]
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 17:58:11,782 1323427 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 17:58:11,783 1323428 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@38e8e33e] after transaction
2017-07-11 17:58:11,783 1323428 [http-bio-8080-exec-8] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:11,783 1323428 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=dhcl3xgg
2017-07-11 17:58:11,789 1323434 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=dhcl3xgg
2017-07-11 17:58:16,795 1328440 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 2 sessions: [z1uqmks4, hgbmeidp]
2017-07-11 17:58:46,779 1358424 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dhcl3xgg] closed with CloseStatus[code=1000, reason=null]
2017-07-11 17:58:46,779 1358424 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dhcl3xgg
2017-07-11 17:58:46,780 1358425 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dhcl3xgg
2017-07-11 17:58:46,780 1358425 [clientOutboundChannel-62] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=dhcl3xgg}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=dhcl3xgg}]
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:47,426 1359071 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:58:47,427 1359072 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:58:47,428 1359073 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:58:47,428 1359073 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:47,428 1359073 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:47,428 1359073 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:47,428 1359073 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:47,431 1359076 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:58:47,432 1359077 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:58:47,433 1359078 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:58:47,433 1359078 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:58:47,433 1359078 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:47,433 1359078 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:47,434 1359079 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:47,434 1359079 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:47,478 1359123 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:47,479 1359124 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:47,480 1359125 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:47,481 1359126 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 17:58:47,481 1359126 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 17:58:47,481 1359126 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 17:58:47,481 1359126 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:58:47,482 1359127 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 17:58:47,483 1359128 [http-bio-8080-exec-9] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:58:47,483 1359128 [http-bio-8080-exec-9] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 17:58:47,484 1359129 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 17:58:47,484 1359129 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:47,493 1359138 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:47,493 1359138 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 17:58:47,493 1359138 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:47,493 1359138 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:47,493 1359138 [http-bio-8080-exec-9] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:47,494 1359139 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:47,494 1359139 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:47,494 1359139 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:47,500 1359145 [http-bio-8080-exec-9] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:47,500 1359145 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:47,500 1359145 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:58:47,501 1359146 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:47,501 1359146 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:47,501 1359146 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:47,501 1359146 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:47,501 1359146 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:47,501 1359146 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:47,501 1359146 [http-bio-8080-exec-9] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:47,501 1359146 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:47,502 1359147 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:58:47,502 1359147 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:47,502 1359147 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:47,502 1359147 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:47,502 1359147 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:47,505 1359150 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 17:58:47,506 1359151 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 17:58:47,507 1359152 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 17:58:47,507 1359152 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:58:47,507 1359152 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 17:58:47,507 1359152 [http-bio-8080-exec-9] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:58:47,507 1359152 [http-bio-8080-exec-9] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 17:58:47,508 1359153 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 17:58:47,508 1359153 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 17:58:47,514 1359159 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 17:58:47,515 1359160 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 17:58:47,516 1359161 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 17:58:47,517 1359162 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 17:58:47,517 1359162 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 17:58:47,517 1359162 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 17:58:47,517 1359162 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 17:58:47,517 1359162 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 17:58:47,517 1359162 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 17:58:47,517 1359162 [http-bio-8080-exec-9] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:47,517 1359162 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:47,517 1359162 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:47,517 1359162 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:47,523 1359168 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 17:58:47,523 1359168 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:58:47,524 1359169 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:47,524 1359169 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:58:47,524 1359169 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:47,524 1359169 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:47,524 1359169 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:47,524 1359169 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 17:58:47,524 1359169 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:47,525 1359170 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:47,525 1359170 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:47,525 1359170 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:47,530 1359175 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 17:58:47,530 1359175 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:58:47,531 1359176 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:47,531 1359176 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:58:47,531 1359176 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:58:47,531 1359176 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:58:47,531 1359176 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:47,531 1359176 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 17:58:47,531 1359176 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:47,533 1359178 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:58:47,533 1359178 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:47,533 1359178 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:47,533 1359178 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:47,533 1359178 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:47,539 1359184 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,539 1359184 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 17:58:47,539 1359184 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785127537 has an empty filter list
2017-07-11 17:58:47,539 1359184 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 17:58:47,539 1359184 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 17:58:47,540 1359185 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 17:58:47,540 1359185 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 17:58:47,540 1359185 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 17:58:47,540 1359185 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:58:47,540 1359185 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 17:58:47,540 1359185 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785127537
2017-07-11 17:58:47,540 1359185 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:47,540 1359185 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:47,620 1359265 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/639/taelhoyu/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,620 1359265 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/639/taelhoyu/websocket'; against '/chat/**'
2017-07-11 17:58:47,620 1359265 [http-bio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - /chat/639/taelhoyu/websocket has an empty filter list
2017-07-11 17:58:47,620 1359265 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/639/taelhoyu/websocket]
2017-07-11 17:58:47,620 1359265 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/639/taelhoyu/websocket
2017-07-11 17:58:47,621 1359266 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/639/taelhoyu/websocket]
2017-07-11 17:58:47,621 1359266 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/639/taelhoyu/websocket] are [/chat/**]
2017-07-11 17:58:47,621 1359266 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/639/taelhoyu/websocket] are {}
2017-07-11 17:58:47,621 1359266 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/639/taelhoyu/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:58:47,621 1359266 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/639/taelhoyu/websocket] is: -1
2017-07-11 17:58:47,621 1359266 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/639/taelhoyu/websocket
2017-07-11 17:58:47,622 1359267 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:47,622 1359267 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:47,623 1359268 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=taelhoyu]
2017-07-11 17:58:47,686 1359331 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 17:58:47,686 1359331 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@3c12f881] for JPA transaction
2017-07-11 17:58:47,686 1359331 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:47,686 1359331 [http-bio-8080-exec-8] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:47,702 1359347 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@9a56a12]
2017-07-11 17:58:47,704 1359349 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 17:58:47,707 1359352 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:47,708 1359353 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 17:58:47,708 1359353 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:58:47,709 1359354 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:58:47,709 1359354 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:47,709 1359354 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:47,710 1359355 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:58:47,711 1359356 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:47,711 1359356 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:47,711 1359356 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:47,711 1359356 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:47,711 1359356 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:47,711 1359356 [http-bio-8080-exec-8] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:47,711 1359356 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:47,712 1359357 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 17:58:47,712 1359357 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@3c12f881]
2017-07-11 17:58:47,712 1359357 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:47,712 1359357 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 17:58:47,712 1359357 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 17:58:47,713 1359358 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 17:58:47,714 1359359 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 17:58:47,714 1359359 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 17:58:47,715 1359360 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 17:58:47,717 1359362 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 17:58:47,717 1359362 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 17:58:47,717 1359362 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 17:58:47,721 1359366 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@3c12f881] after transaction
2017-07-11 17:58:47,721 1359366 [http-bio-8080-exec-8] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:47,724 1359369 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=taelhoyu
2017-07-11 17:58:47,812 1359457 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=taelhoyu
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:47,944 1359589 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:47,945 1359590 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:58:47,946 1359591 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:58:47,946 1359591 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:58:47,946 1359591 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:58:47,946 1359591 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:58:47,946 1359591 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:58:47,947 1359592 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:47,947 1359592 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:47,947 1359592 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:47,947 1359592 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:48,028 1359673 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:58:48,029 1359674 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:58:48,030 1359675 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 17:58:48,031 1359676 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:58:48,031 1359676 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 17:58:48,031 1359676 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 17:58:48,031 1359676 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:48,037 1359682 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:58:48,037 1359682 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 17:58:48,037 1359682 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:58:48,037 1359682 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 17:58:48,037 1359682 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 17:58:48,037 1359682 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 17:58:48,037 1359682 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 17:58:48,038 1359683 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 17:58:48,038 1359683 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:58:48,038 1359683 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:48,038 1359683 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:48,038 1359683 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:48,042 1359687 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:48,042 1359687 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:48,043 1359688 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:48,044 1359689 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:48,044 1359689 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:48,044 1359689 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:48,048 1359693 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:48,048 1359693 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:48,049 1359694 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:58:48,049 1359694 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:48,049 1359694 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:48,049 1359694 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:48,049 1359694 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:48,049 1359694 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:48,049 1359694 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:48,049 1359694 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:48,049 1359694 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:48,049 1359694 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:48,049 1359694 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:48,050 1359695 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:48,055 1359700 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:48,055 1359700 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:48,055 1359700 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:58:48,055 1359700 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:48,055 1359700 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:48,056 1359701 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:48,056 1359701 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:58:48,056 1359701 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:48,056 1359701 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:48,056 1359701 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:48,056 1359701 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:48,056 1359701 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:48,056 1359701 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:48,056 1359701 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:48,061 1359706 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:48,061 1359706 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:58:48,062 1359707 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:48,062 1359707 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:48,062 1359707 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:48,062 1359707 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:58:48,062 1359707 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:58:48,062 1359707 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:48,062 1359707 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:58:48,062 1359707 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:58:48,062 1359707 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:48,062 1359707 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:48,062 1359707 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:48,063 1359708 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:58:48,063 1359708 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:58:48,063 1359708 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:58:48,068 1359713 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:48,068 1359713 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:58:48,069 1359714 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:58:48,069 1359714 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:58:48,069 1359714 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:48,069 1359714 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:58:48,069 1359714 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:58:48,069 1359714 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:58:48,069 1359714 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:58:48,069 1359714 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:58:48,069 1359714 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:58:48,070 1359715 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:58:48,070 1359715 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:58:48,070 1359715 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:58:48,071 1359716 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:58:48,071 1359716 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:58:51,795 1363440 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [dhcl3xgg]
2017-07-11 17:58:59,215 1370860 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=taelhoyu] closed with CloseStatus[code=1000, reason=null]
2017-07-11 17:58:59,215 1370860 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session taelhoyu
2017-07-11 17:58:59,215 1370860 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=taelhoyu
2017-07-11 17:58:59,216 1370861 [clientOutboundChannel-64] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=taelhoyu}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=taelhoyu}]
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,070 1371715 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:00,071 1371716 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:00,072 1371717 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:00,072 1371717 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:00,072 1371717 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:00,072 1371717 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:00,072 1371717 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:00,073 1371718 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:00,073 1371718 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:00,073 1371718 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:00,073 1371718 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:00,073 1371718 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,075 1371720 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:00,076 1371721 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:00,077 1371722 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:00,077 1371722 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:00,077 1371722 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:00,077 1371722 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:00,077 1371722 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:00,153 1371798 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:00,154 1371799 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:00,154 1371799 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:00,154 1371799 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:00,154 1371799 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 17:59:00,155 1371800 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:00,155 1371800 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 17:59:00,155 1371800 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:00,155 1371800 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 17:59:00,155 1371800 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:00,155 1371800 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 17:59:00,156 1371801 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,156 1371801 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:00,157 1371802 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:00,157 1371802 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:00,157 1371802 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:00,157 1371802 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:00,158 1371803 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:00,158 1371803 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:00,158 1371803 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:00,158 1371803 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:00,158 1371803 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:00,158 1371803 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,158 1371803 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 17:59:00,158 1371803 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,158 1371803 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:00,159 1371804 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:00,159 1371804 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:00,159 1371804 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:00,159 1371804 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:00,159 1371804 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:00,159 1371804 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 17:59:00,159 1371804 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 17:59:00,159 1371804 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 17:59:00,160 1371805 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:00,160 1371805 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 17:59:00,160 1371805 [http-bio-8080-exec-1] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:00,160 1371805 [http-bio-8080-exec-1] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 17:59:00,161 1371806 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 17:59:00,161 1371806 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,167 1371812 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:00,167 1371812 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 17:59:00,167 1371812 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:00,167 1371812 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:00,167 1371812 [http-bio-8080-exec-1] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:00,168 1371813 [http-bio-8080-exec-1] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:00,168 1371813 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:00,168 1371813 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,173 1371818 [http-bio-8080-exec-1] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,174 1371819 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:00,174 1371819 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,174 1371819 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:00,174 1371819 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,175 1371820 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:00,175 1371820 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,175 1371820 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:00,175 1371820 [http-bio-8080-exec-1] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:00,175 1371820 [http-bio-8080-exec-1] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:00,175 1371820 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:00,176 1371821 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:00,176 1371821 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:00,176 1371821 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:00,176 1371821 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:00,176 1371821 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:00,182 1371827 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,182 1371827 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 17:59:00,182 1371827 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,182 1371827 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:00,182 1371827 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 17:59:00,182 1371827 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:00,182 1371827 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 17:59:00,182 1371827 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:00,183 1371828 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 17:59:00,184 1371829 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 17:59:00,185 1371830 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 17:59:00,185 1371830 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:00,185 1371830 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 17:59:00,185 1371830 [http-bio-8080-exec-1] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:00,186 1371831 [http-bio-8080-exec-1] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 17:59:00,186 1371831 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 17:59:00,186 1371831 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 17:59:00,193 1371838 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 17:59:00,194 1371839 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 17:59:00,195 1371840 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 17:59:00,196 1371841 [http-bio-8080-exec-1] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:00,196 1371841 [http-bio-8080-exec-1] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:00,196 1371841 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:00,196 1371841 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,201 1371846 [http-bio-8080-exec-1] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 17:59:00,201 1371846 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:59:00,202 1371847 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:00,202 1371847 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:59:00,202 1371847 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:00,202 1371847 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:00,202 1371847 [http-bio-8080-exec-1] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:00,202 1371847 [http-bio-8080-exec-1] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 17:59:00,202 1371847 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:00,203 1371848 [http-bio-8080-exec-1] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:00,203 1371848 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:00,203 1371848 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,209 1371854 [http-bio-8080-exec-1] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 17:59:00,209 1371854 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:59:00,210 1371855 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:00,210 1371855 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:59:00,210 1371855 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:00,210 1371855 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:00,210 1371855 [http-bio-8080-exec-1] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:00,210 1371855 [http-bio-8080-exec-1] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 17:59:00,210 1371855 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:00,212 1371857 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:00,212 1371857 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:00,212 1371857 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:00,212 1371857 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:00,212 1371857 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:00,290 1371935 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,290 1371935 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 17:59:00,290 1371935 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785140286 has an empty filter list
2017-07-11 17:59:00,290 1371935 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 17:59:00,291 1371936 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 17:59:00,291 1371936 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 17:59:00,291 1371936 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 17:59:00,291 1371936 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 17:59:00,291 1371936 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:59:00,291 1371936 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 17:59:00,291 1371936 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785140286
2017-07-11 17:59:00,292 1371937 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:00,292 1371937 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:00,434 1372079 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/338/wmdeq1wp/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,434 1372079 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/338/wmdeq1wp/websocket'; against '/chat/**'
2017-07-11 17:59:00,434 1372079 [http-bio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - /chat/338/wmdeq1wp/websocket has an empty filter list
2017-07-11 17:59:00,434 1372079 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/338/wmdeq1wp/websocket]
2017-07-11 17:59:00,434 1372079 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/338/wmdeq1wp/websocket
2017-07-11 17:59:00,434 1372079 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/338/wmdeq1wp/websocket]
2017-07-11 17:59:00,434 1372079 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/338/wmdeq1wp/websocket] are [/chat/**]
2017-07-11 17:59:00,434 1372079 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/338/wmdeq1wp/websocket] are {}
2017-07-11 17:59:00,434 1372079 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/338/wmdeq1wp/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:59:00,434 1372079 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/338/wmdeq1wp/websocket] is: -1
2017-07-11 17:59:00,435 1372080 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/338/wmdeq1wp/websocket
2017-07-11 17:59:00,437 1372082 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:00,437 1372082 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:00,437 1372082 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wmdeq1wp]
2017-07-11 17:59:00,478 1372123 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 17:59:00,478 1372123 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@284319c3] for JPA transaction
2017-07-11 17:59:00,478 1372123 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:00,478 1372123 [http-bio-8080-exec-8] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,484 1372129 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@662c2228]
2017-07-11 17:59:00,484 1372129 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 17:59:00,485 1372130 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:00,485 1372130 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 17:59:00,485 1372130 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:00,486 1372131 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:00,486 1372131 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:00,486 1372131 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@284319c3]
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 17:59:00,487 1372132 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 17:59:00,488 1372133 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 17:59:00,488 1372133 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 17:59:00,489 1372134 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@284319c3] after transaction
2017-07-11 17:59:00,489 1372134 [http-bio-8080-exec-8] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:00,489 1372134 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=wmdeq1wp
2017-07-11 17:59:00,493 1372138 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=wmdeq1wp
2017-07-11 17:59:00,599 1372244 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,600 1372245 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:00,601 1372246 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:00,602 1372247 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:00,602 1372247 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:00,602 1372247 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:00,602 1372247 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:00,602 1372247 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:00,602 1372247 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:00,603 1372248 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:00,603 1372248 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:00,603 1372248 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:00,604 1372249 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:00,604 1372249 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:00,604 1372249 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:00,604 1372249 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:00,604 1372249 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:00,686 1372331 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:00,687 1372332 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:00,688 1372333 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 17:59:00,688 1372333 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 17:59:00,688 1372333 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 17:59:00,688 1372333 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:00,688 1372333 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 17:59:00,688 1372333 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:00,689 1372334 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 17:59:00,689 1372334 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 17:59:00,689 1372334 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,697 1372342 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:00,697 1372342 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 17:59:00,697 1372342 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:59:00,697 1372342 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 17:59:00,697 1372342 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 17:59:00,697 1372342 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 17:59:00,697 1372342 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 17:59:00,697 1372342 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 17:59:00,697 1372342 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:00,698 1372343 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:00,698 1372343 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:00,698 1372343 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,705 1372350 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:00,705 1372350 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:59:00,706 1372351 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:00,706 1372351 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:00,706 1372351 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:00,706 1372351 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 17:59:00,706 1372351 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:00,706 1372351 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:00,707 1372352 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:00,707 1372352 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:00,707 1372352 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:00,707 1372352 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:00,707 1372352 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:00,707 1372352 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:00,707 1372352 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:00,707 1372352 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:00,707 1372352 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:00,708 1372353 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:00,708 1372353 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:00,708 1372353 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,715 1372360 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,715 1372360 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:00,715 1372360 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,715 1372360 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:00,715 1372360 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,716 1372361 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:00,716 1372361 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,716 1372361 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:00,716 1372361 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:00,716 1372361 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:00,716 1372361 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:00,716 1372361 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:00,716 1372361 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:00,717 1372362 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,722 1372367 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:00,722 1372367 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:00,723 1372368 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:59:00,723 1372368 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:00,723 1372368 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:00,723 1372368 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:00,723 1372368 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:00,723 1372368 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:00,723 1372368 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:00,724 1372369 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:00,724 1372369 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:00,725 1372370 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:00,725 1372370 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:00,725 1372370 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,732 1372377 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:00,732 1372377 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:59:00,733 1372378 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:00,733 1372378 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:00,733 1372378 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:00,733 1372378 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:00,733 1372378 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:00,733 1372378 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:00,733 1372378 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:00,733 1372378 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:00,733 1372378 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:00,733 1372378 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:00,734 1372379 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:00,734 1372379 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:00,734 1372379 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:00,734 1372379 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:00,742 1372387 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,742 1372387 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:00,743 1372388 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,743 1372388 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:00,743 1372388 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,743 1372388 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:00,743 1372388 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:00,743 1372388 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:00,743 1372388 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:00,743 1372388 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:00,743 1372388 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:00,745 1372390 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:00,745 1372390 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:00,745 1372390 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:00,745 1372390 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:00,745 1372390 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:06,795 1378440 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [taelhoyu]
2017-07-11 17:59:14,750 1386395 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wmdeq1wp] closed with CloseStatus[code=1000, reason=null]
2017-07-11 17:59:14,750 1386395 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wmdeq1wp
2017-07-11 17:59:14,751 1386396 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wmdeq1wp
2017-07-11 17:59:14,751 1386396 [clientOutboundChannel-66] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=wmdeq1wp}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=wmdeq1wp}]
2017-07-11 17:59:15,755 1387400 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:15,755 1387400 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:15,755 1387400 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:15,756 1387401 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:15,758 1387403 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:15,758 1387403 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:15,758 1387403 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:15,758 1387403 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:15,758 1387403 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:15,759 1387404 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:15,759 1387404 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:15,759 1387404 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:15,759 1387404 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:15,759 1387404 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:15,759 1387404 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:15,759 1387404 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:15,759 1387404 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:15,759 1387404 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:15,760 1387405 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:15,760 1387405 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:15,760 1387405 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:15,760 1387405 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:15,760 1387405 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:15,760 1387405 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:15,760 1387405 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:15,760 1387405 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:15,760 1387405 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:15,762 1387407 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:15,762 1387407 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:15,762 1387407 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:15,762 1387407 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:15,762 1387407 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:15,763 1387408 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:15,764 1387409 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:15,765 1387410 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:15,766 1387411 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:15,766 1387411 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:15,766 1387411 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:15,766 1387411 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:15,766 1387411 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:15,824 1387469 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 17:59:15,825 1387470 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:15,825 1387470 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 17:59:15,825 1387470 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:15,825 1387470 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 17:59:15,825 1387470 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:15,825 1387470 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 17:59:15,827 1387472 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:59:15,828 1387473 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:15,828 1387473 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:15,828 1387473 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:15,828 1387473 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:15,828 1387473 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:15,828 1387473 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:15,828 1387473 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 17:59:15,828 1387473 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 17:59:15,828 1387473 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 17:59:15,828 1387473 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:15,828 1387473 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 17:59:15,829 1387474 [http-bio-8080-exec-9] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:15,829 1387474 [http-bio-8080-exec-9] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 17:59:15,829 1387474 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 17:59:15,830 1387475 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:15,838 1387483 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:15,838 1387483 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 17:59:15,839 1387484 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:15,839 1387484 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:15,839 1387484 [http-bio-8080-exec-9] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:15,839 1387484 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:15,840 1387485 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:15,840 1387485 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:15,852 1387497 [http-bio-8080-exec-9] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:15,853 1387498 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:15,856 1387501 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:15,856 1387501 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:15,856 1387501 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:15,857 1387502 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:15,857 1387502 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:15,857 1387502 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:15,857 1387502 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:15,858 1387503 [http-bio-8080-exec-9] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:15,858 1387503 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:15,861 1387506 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:15,862 1387507 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:15,862 1387507 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:15,862 1387507 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:15,862 1387507 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:15,868 1387513 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:15,868 1387513 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 17:59:15,868 1387513 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:59:15,868 1387513 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:15,868 1387513 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 17:59:15,868 1387513 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:15,869 1387514 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:15,870 1387515 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 17:59:15,871 1387516 [http-bio-8080-exec-9] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:15,871 1387516 [http-bio-8080-exec-9] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 17:59:15,872 1387517 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 17:59:15,872 1387517 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:15,884 1387529 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:15,884 1387529 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 17:59:15,884 1387529 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:59:15,884 1387529 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 17:59:15,884 1387529 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 17:59:15,884 1387529 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 17:59:15,885 1387530 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 17:59:15,886 1387531 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 17:59:15,887 1387532 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 17:59:15,888 1387533 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 17:59:15,888 1387533 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 17:59:15,888 1387533 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 17:59:15,888 1387533 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 17:59:15,888 1387533 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 17:59:15,888 1387533 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 17:59:15,888 1387533 [http-bio-8080-exec-9] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:15,888 1387533 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:15,888 1387533 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:15,888 1387533 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:15,895 1387540 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 17:59:15,895 1387540 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:59:15,896 1387541 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:15,896 1387541 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:59:15,896 1387541 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:15,896 1387541 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:15,896 1387541 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:15,896 1387541 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 17:59:15,896 1387541 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:15,897 1387542 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:15,897 1387542 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:15,897 1387542 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:15,906 1387551 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 17:59:15,906 1387551 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:59:15,907 1387552 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:15,907 1387552 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:59:15,907 1387552 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:15,907 1387552 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:15,907 1387552 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:15,907 1387552 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 17:59:15,907 1387552 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:15,908 1387553 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:15,909 1387554 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:15,909 1387554 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:15,909 1387554 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:15,909 1387554 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:15,978 1387623 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:15,978 1387623 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 17:59:15,979 1387624 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785155977 has an empty filter list
2017-07-11 17:59:15,979 1387624 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 17:59:15,979 1387624 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 17:59:15,979 1387624 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 17:59:15,979 1387624 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 17:59:15,979 1387624 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 17:59:15,979 1387624 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:59:15,979 1387624 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 17:59:15,979 1387624 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785155977
2017-07-11 17:59:15,980 1387625 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:15,980 1387625 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:16,110 1387755 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/775/f1ucq2bj/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:16,110 1387755 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/775/f1ucq2bj/websocket'; against '/chat/**'
2017-07-11 17:59:16,110 1387755 [http-bio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - /chat/775/f1ucq2bj/websocket has an empty filter list
2017-07-11 17:59:16,111 1387756 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/775/f1ucq2bj/websocket]
2017-07-11 17:59:16,111 1387756 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/775/f1ucq2bj/websocket
2017-07-11 17:59:16,111 1387756 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/775/f1ucq2bj/websocket]
2017-07-11 17:59:16,111 1387756 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/775/f1ucq2bj/websocket] are [/chat/**]
2017-07-11 17:59:16,112 1387757 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/775/f1ucq2bj/websocket] are {}
2017-07-11 17:59:16,112 1387757 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/775/f1ucq2bj/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:59:16,112 1387757 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/775/f1ucq2bj/websocket] is: -1
2017-07-11 17:59:16,114 1387759 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/775/f1ucq2bj/websocket
2017-07-11 17:59:16,119 1387764 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:16,119 1387764 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:16,119 1387764 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=f1ucq2bj]
2017-07-11 17:59:16,199 1387844 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 17:59:16,200 1387845 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@2129cd53] for JPA transaction
2017-07-11 17:59:16,200 1387845 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:16,200 1387845 [http-bio-8080-exec-8] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:16,207 1387852 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7bb8aa2b]
2017-07-11 17:59:16,207 1387852 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 17:59:16,208 1387853 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:16,208 1387853 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 17:59:16,208 1387853 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:16,209 1387854 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:16,209 1387854 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:16,209 1387854 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@2129cd53]
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 17:59:16,210 1387855 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 17:59:16,211 1387856 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 17:59:16,211 1387856 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 17:59:16,211 1387856 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 17:59:16,211 1387856 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 17:59:16,211 1387856 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 17:59:16,211 1387856 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 17:59:16,211 1387856 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 17:59:16,212 1387857 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@2129cd53] after transaction
2017-07-11 17:59:16,213 1387858 [http-bio-8080-exec-8] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:16,214 1387859 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=f1ucq2bj
2017-07-11 17:59:16,224 1387869 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=f1ucq2bj
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:16,387 1388032 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:16,388 1388033 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:16,389 1388034 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:16,390 1388035 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:16,390 1388035 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:16,390 1388035 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:16,391 1388036 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:16,395 1388040 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:16,396 1388041 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:16,396 1388041 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:16,396 1388041 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:16,396 1388041 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 17:59:16,500 1388145 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:16,501 1388146 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 17:59:16,501 1388146 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:16,501 1388146 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:16,501 1388146 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:16,501 1388146 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:16,501 1388146 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:16,501 1388146 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:16,501 1388146 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:59:16,501 1388146 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:16,502 1388147 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:16,503 1388148 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 17:59:16,503 1388148 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 17:59:16,503 1388148 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 17:59:16,503 1388148 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:16,503 1388148 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 17:59:16,503 1388148 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:16,504 1388149 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 17:59:16,505 1388150 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 17:59:16,505 1388150 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:16,524 1388169 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:16,524 1388169 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 17:59:16,524 1388169 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:59:16,525 1388170 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 17:59:16,525 1388170 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 17:59:16,525 1388170 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 17:59:16,525 1388170 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 17:59:16,525 1388170 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 17:59:16,525 1388170 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:16,525 1388170 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:16,526 1388171 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:16,526 1388171 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:16,539 1388184 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:16,539 1388184 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:59:16,540 1388185 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:16,540 1388185 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:16,540 1388185 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:16,540 1388185 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 17:59:16,540 1388185 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:16,541 1388186 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:16,541 1388186 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:16,541 1388186 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:16,541 1388186 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:16,541 1388186 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:16,541 1388186 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:16,541 1388186 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:16,541 1388186 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:16,541 1388186 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:16,541 1388186 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:16,542 1388187 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:16,542 1388187 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:16,542 1388187 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:16,548 1388193 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:16,548 1388193 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:16,549 1388194 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:16,549 1388194 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:16,549 1388194 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:16,549 1388194 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:16,549 1388194 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:16,549 1388194 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:16,549 1388194 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:16,549 1388194 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:16,549 1388194 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:16,550 1388195 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:16,550 1388195 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:16,550 1388195 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:16,559 1388204 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:16,559 1388204 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:16,562 1388207 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:59:16,562 1388207 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:16,562 1388207 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:16,562 1388207 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:16,562 1388207 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:16,563 1388208 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:16,563 1388208 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:16,563 1388208 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:16,563 1388208 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:16,565 1388210 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:16,565 1388210 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:16,565 1388210 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:16,581 1388226 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:16,581 1388226 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:59:16,584 1388229 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:16,585 1388230 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:16,585 1388230 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:16,585 1388230 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:16,585 1388230 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:16,586 1388231 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:16,586 1388231 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:16,586 1388231 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:16,586 1388231 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:16,586 1388231 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:16,586 1388231 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:16,589 1388234 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:16,590 1388235 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:16,590 1388235 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:16,604 1388249 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:16,606 1388251 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:16,608 1388253 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:16,608 1388253 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:16,608 1388253 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:16,608 1388253 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:16,608 1388253 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:16,608 1388253 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:16,608 1388253 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:16,608 1388253 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:16,609 1388254 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:16,613 1388258 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:16,613 1388258 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:16,613 1388258 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:16,613 1388258 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:16,613 1388258 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:21,796 1393441 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [wmdeq1wp]
2017-07-11 17:59:27,970 1399615 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=f1ucq2bj] closed with CloseStatus[code=1000, reason=null]
2017-07-11 17:59:27,970 1399615 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session f1ucq2bj
2017-07-11 17:59:27,970 1399615 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=f1ucq2bj
2017-07-11 17:59:27,971 1399616 [clientOutboundChannel-68] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=f1ucq2bj}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=f1ucq2bj}]
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:28,649 1400294 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:28,650 1400295 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:28,651 1400296 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:28,652 1400297 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:28,652 1400297 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:28,652 1400297 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:28,652 1400297 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:28,652 1400297 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:28,654 1400299 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:28,655 1400300 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:28,656 1400301 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:28,656 1400301 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:28,656 1400301 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:28,656 1400301 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:28,656 1400301 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:28,708 1400353 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:28,708 1400353 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 17:59:28,708 1400353 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:59:28,708 1400353 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:28,708 1400353 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 17:59:28,708 1400353 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:28,708 1400353 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 17:59:28,708 1400353 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:28,708 1400353 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 17:59:28,708 1400353 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:28,709 1400354 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:28,710 1400355 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:28,710 1400355 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:28,710 1400355 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:28,710 1400355 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:28,710 1400355 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:28,710 1400355 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:28,710 1400355 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:28,710 1400355 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:28,710 1400355 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:28,711 1400356 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 17:59:28,712 1400357 [http-bio-8080-exec-1] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:28,712 1400357 [http-bio-8080-exec-1] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 17:59:28,713 1400358 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 17:59:28,713 1400358 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:28,720 1400365 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:28,720 1400365 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 17:59:28,720 1400365 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:28,720 1400365 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:28,722 1400367 [http-bio-8080-exec-1] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:28,722 1400367 [http-bio-8080-exec-1] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:28,723 1400368 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:28,723 1400368 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:28,724 1400369 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:28,725 1400370 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 17:59:28,726 1400371 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:28,727 1400372 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 17:59:28,727 1400372 [http-bio-8080-exec-9] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:28,727 1400372 [http-bio-8080-exec-9] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 17:59:28,728 1400373 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 17:59:28,728 1400373 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:28,729 1400374 [http-bio-8080-exec-1] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:28,730 1400375 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:28,730 1400375 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:28,730 1400375 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:28,730 1400375 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:28,730 1400375 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:28,730 1400375 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:28,730 1400375 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:28,730 1400375 [http-bio-8080-exec-1] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:28,730 1400375 [http-bio-8080-exec-1] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:28,730 1400375 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:28,732 1400377 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:28,732 1400377 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:28,732 1400377 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:28,732 1400377 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:28,732 1400377 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:28,737 1400382 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:28,737 1400382 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 17:59:28,737 1400382 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 17:59:28,738 1400383 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 17:59:28,739 1400384 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 17:59:28,740 1400385 [http-bio-8080-exec-9] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:28,741 1400386 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:28,741 1400386 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:28,741 1400386 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:28,747 1400392 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 17:59:28,747 1400392 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:59:28,747 1400392 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:28,748 1400393 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:59:28,748 1400393 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:28,748 1400393 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:28,748 1400393 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:28,748 1400393 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 17:59:28,748 1400393 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:28,748 1400393 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:28,749 1400394 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:28,749 1400394 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:28,755 1400400 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 17:59:28,755 1400400 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:59:28,755 1400400 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:28,756 1400401 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:59:28,756 1400401 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:28,756 1400401 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:28,756 1400401 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:28,756 1400401 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 17:59:28,756 1400401 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:28,757 1400402 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:28,757 1400402 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:28,757 1400402 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:28,757 1400402 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:28,757 1400402 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:28,765 1400410 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:28,765 1400410 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 17:59:28,765 1400410 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785168764 has an empty filter list
2017-07-11 17:59:28,766 1400411 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 17:59:28,766 1400411 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 17:59:28,766 1400411 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 17:59:28,766 1400411 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 17:59:28,766 1400411 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 17:59:28,766 1400411 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:59:28,766 1400411 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 17:59:28,766 1400411 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785168764
2017-07-11 17:59:28,766 1400411 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:28,766 1400411 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:28,843 1400488 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/252/jfk2nnzj/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:28,843 1400488 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/252/jfk2nnzj/websocket'; against '/chat/**'
2017-07-11 17:59:28,843 1400488 [http-bio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - /chat/252/jfk2nnzj/websocket has an empty filter list
2017-07-11 17:59:28,844 1400489 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/252/jfk2nnzj/websocket]
2017-07-11 17:59:28,844 1400489 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/252/jfk2nnzj/websocket
2017-07-11 17:59:28,844 1400489 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/252/jfk2nnzj/websocket]
2017-07-11 17:59:28,844 1400489 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/252/jfk2nnzj/websocket] are [/chat/**]
2017-07-11 17:59:28,844 1400489 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/252/jfk2nnzj/websocket] are {}
2017-07-11 17:59:28,844 1400489 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/252/jfk2nnzj/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:59:28,844 1400489 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/252/jfk2nnzj/websocket] is: -1
2017-07-11 17:59:28,844 1400489 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/252/jfk2nnzj/websocket
2017-07-11 17:59:28,846 1400491 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:28,846 1400491 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:28,847 1400492 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jfk2nnzj]
2017-07-11 17:59:28,884 1400529 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 17:59:28,885 1400530 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@149bfa60] for JPA transaction
2017-07-11 17:59:28,885 1400530 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:28,885 1400530 [http-bio-8080-exec-8] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:28,891 1400536 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@629bf015]
2017-07-11 17:59:28,891 1400536 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 17:59:28,892 1400537 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:28,892 1400537 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 17:59:28,892 1400537 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:28,893 1400538 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:28,893 1400538 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:28,893 1400538 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:28,895 1400540 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:59:28,896 1400541 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:28,896 1400541 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:28,896 1400541 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:28,896 1400541 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:28,896 1400541 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:28,896 1400541 [http-bio-8080-exec-8] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:28,896 1400541 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:28,897 1400542 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 17:59:28,897 1400542 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@149bfa60]
2017-07-11 17:59:28,897 1400542 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:28,897 1400542 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 17:59:28,897 1400542 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 17:59:28,897 1400542 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 17:59:28,898 1400543 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 17:59:28,898 1400543 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 17:59:28,898 1400543 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 17:59:28,898 1400543 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 17:59:28,898 1400543 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 17:59:28,898 1400543 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 17:59:28,899 1400544 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@149bfa60] after transaction
2017-07-11 17:59:28,900 1400545 [http-bio-8080-exec-8] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:28,900 1400545 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=jfk2nnzj
2017-07-11 17:59:28,936 1400581 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=jfk2nnzj
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:29,054 1400699 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:29,055 1400700 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:29,056 1400701 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:29,056 1400701 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:29,056 1400701 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:29,056 1400701 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:29,056 1400701 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:29,092 1400737 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:29,093 1400738 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:29,094 1400739 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:29,095 1400740 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:29,095 1400740 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:29,095 1400740 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:29,095 1400740 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:29,095 1400740 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 17:59:29,095 1400740 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 17:59:29,095 1400740 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 17:59:29,095 1400740 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:29,095 1400740 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 17:59:29,095 1400740 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:29,096 1400741 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 17:59:29,096 1400741 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 17:59:29,096 1400741 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:29,109 1400754 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:29,109 1400754 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 17:59:29,109 1400754 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:59:29,110 1400755 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 17:59:29,110 1400755 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 17:59:29,110 1400755 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 17:59:29,110 1400755 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 17:59:29,110 1400755 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 17:59:29,110 1400755 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:29,110 1400755 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:29,110 1400755 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:29,110 1400755 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:29,114 1400759 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:29,115 1400760 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:59:29,115 1400760 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:29,115 1400760 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:29,115 1400760 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:29,115 1400760 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 17:59:29,115 1400760 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:29,116 1400761 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:29,121 1400766 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:29,121 1400766 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:29,121 1400766 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:29,121 1400766 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:29,121 1400766 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:29,121 1400766 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:29,121 1400766 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:29,121 1400766 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:29,121 1400766 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:29,121 1400766 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:29,122 1400767 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:29,122 1400767 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:29,122 1400767 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:29,122 1400767 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:29,126 1400771 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:29,127 1400772 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:29,127 1400772 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:59:29,127 1400772 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:29,127 1400772 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:29,127 1400772 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:29,127 1400772 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:29,127 1400772 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:29,127 1400772 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:29,127 1400772 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:29,127 1400772 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:29,128 1400773 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:29,128 1400773 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:29,128 1400773 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:29,132 1400777 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:29,132 1400777 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:59:29,133 1400778 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:29,133 1400778 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:29,133 1400778 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:29,133 1400778 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:29,133 1400778 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:29,133 1400778 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:29,133 1400778 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:29,133 1400778 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:29,133 1400778 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:29,133 1400778 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:29,133 1400778 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:29,134 1400779 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:29,134 1400779 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:29,134 1400779 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:29,138 1400783 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:29,138 1400783 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:29,139 1400784 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:29,139 1400784 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:29,139 1400784 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:29,139 1400784 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:29,139 1400784 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:29,139 1400784 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:29,139 1400784 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:29,139 1400784 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:29,139 1400784 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:29,140 1400785 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:29,140 1400785 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:29,140 1400785 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:29,141 1400786 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:29,141 1400786 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:36,794 1408439 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [f1ucq2bj]
2017-07-11 17:59:47,518 1419163 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jfk2nnzj] closed with CloseStatus[code=1000, reason=null]
2017-07-11 17:59:47,519 1419164 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jfk2nnzj
2017-07-11 17:59:47,519 1419164 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jfk2nnzj
2017-07-11 17:59:47,519 1419164 [clientOutboundChannel-70] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=jfk2nnzj}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=jfk2nnzj}]
2017-07-11 17:59:48,237 1419882 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,238 1419883 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:48,239 1419884 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:48,240 1419885 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:48,240 1419885 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:48,240 1419885 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:48,241 1419886 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:48,241 1419886 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:48,241 1419886 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:48,241 1419886 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:48,241 1419886 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:48,242 1419887 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:48,243 1419888 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:48,244 1419889 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:48,245 1419890 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:48,245 1419890 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:48,245 1419890 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:48,245 1419890 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:48,245 1419890 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:48,282 1419927 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:48,283 1419928 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:48,284 1419929 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:48,284 1419929 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 17:59:48,284 1419929 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:48,284 1419929 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 17:59:48,284 1419929 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:48,284 1419929 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 17:59:48,284 1419929 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:48,284 1419929 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 17:59:48,284 1419929 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,284 1419929 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:48,285 1419930 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:48,286 1419931 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:48,286 1419931 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:48,286 1419931 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:48,286 1419931 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:48,286 1419931 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 17:59:48,286 1419931 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 17:59:48,287 1419932 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 17:59:48,287 1419932 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:48,287 1419932 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 17:59:48,288 1419933 [http-bio-8080-exec-1] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:48,288 1419933 [http-bio-8080-exec-1] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 17:59:48,289 1419934 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 17:59:48,289 1419934 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,295 1419940 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:48,295 1419940 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 17:59:48,295 1419940 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:48,295 1419940 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:48,296 1419941 [http-bio-8080-exec-1] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:48,296 1419941 [http-bio-8080-exec-1] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:48,296 1419941 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:48,296 1419941 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,302 1419947 [http-bio-8080-exec-1] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,302 1419947 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:48,303 1419948 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,303 1419948 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:48,303 1419948 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,303 1419948 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:48,303 1419948 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,303 1419948 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:48,303 1419948 [http-bio-8080-exec-1] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:48,303 1419948 [http-bio-8080-exec-1] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:48,303 1419948 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,304 1419949 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:48,305 1419950 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:48,305 1419950 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:48,305 1419950 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:48,305 1419950 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:48,305 1419950 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:48,305 1419950 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:48,305 1419950 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:48,305 1419950 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:48,305 1419950 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 17:59:48,306 1419951 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 17:59:48,307 1419952 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 17:59:48,307 1419952 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:48,307 1419952 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 17:59:48,307 1419952 [http-bio-8080-exec-9] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:48,307 1419952 [http-bio-8080-exec-9] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 17:59:48,308 1419953 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 17:59:48,308 1419953 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,314 1419959 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:48,314 1419959 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 17:59:48,314 1419959 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:59:48,314 1419959 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 17:59:48,315 1419960 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 17:59:48,316 1419961 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 17:59:48,317 1419962 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 17:59:48,317 1419962 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 17:59:48,317 1419962 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 17:59:48,317 1419962 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 17:59:48,317 1419962 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 17:59:48,317 1419962 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 17:59:48,317 1419962 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 17:59:48,317 1419962 [http-bio-8080-exec-9] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:48,317 1419962 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:48,317 1419962 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:48,317 1419962 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,323 1419968 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 17:59:48,323 1419968 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:59:48,324 1419969 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:48,324 1419969 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:59:48,324 1419969 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:48,324 1419969 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:48,324 1419969 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:48,324 1419969 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 17:59:48,324 1419969 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:48,325 1419970 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:48,325 1419970 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:48,325 1419970 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,331 1419976 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 17:59:48,331 1419976 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 17:59:48,331 1419976 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:48,332 1419977 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 17:59:48,332 1419977 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:48,332 1419977 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:48,332 1419977 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:48,332 1419977 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 17:59:48,332 1419977 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:48,333 1419978 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:48,333 1419978 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:48,333 1419978 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:48,333 1419978 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:48,333 1419978 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:48,344 1419989 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,344 1419989 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 17:59:48,344 1419989 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785188343 has an empty filter list
2017-07-11 17:59:48,344 1419989 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 17:59:48,345 1419990 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 17:59:48,345 1419990 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 17:59:48,345 1419990 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 17:59:48,345 1419990 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 17:59:48,345 1419990 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:59:48,345 1419990 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 17:59:48,345 1419990 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785188343
2017-07-11 17:59:48,345 1419990 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:48,345 1419990 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:48,459 1420104 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/045/kta2ysg3/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,459 1420104 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/045/kta2ysg3/websocket'; against '/chat/**'
2017-07-11 17:59:48,460 1420105 [http-bio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - /chat/045/kta2ysg3/websocket has an empty filter list
2017-07-11 17:59:48,460 1420105 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/045/kta2ysg3/websocket]
2017-07-11 17:59:48,461 1420106 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/045/kta2ysg3/websocket
2017-07-11 17:59:48,463 1420108 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/045/kta2ysg3/websocket]
2017-07-11 17:59:48,464 1420109 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/045/kta2ysg3/websocket] are [/chat/**]
2017-07-11 17:59:48,464 1420109 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/045/kta2ysg3/websocket] are {}
2017-07-11 17:59:48,464 1420109 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/045/kta2ysg3/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 17:59:48,465 1420110 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/045/kta2ysg3/websocket] is: -1
2017-07-11 17:59:48,466 1420111 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/045/kta2ysg3/websocket
2017-07-11 17:59:48,498 1420143 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:48,498 1420143 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:48,502 1420147 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=kta2ysg3]
2017-07-11 17:59:48,554 1420199 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 17:59:48,555 1420200 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@3eae2966] for JPA transaction
2017-07-11 17:59:48,555 1420200 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:48,556 1420201 [http-bio-8080-exec-8] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,579 1420224 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@31b2ab4c]
2017-07-11 17:59:48,579 1420224 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 17:59:48,581 1420226 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:48,582 1420227 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 17:59:48,583 1420228 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:48,583 1420228 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:48,583 1420228 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:48,583 1420228 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:48,584 1420229 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:59:48,584 1420229 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:48,584 1420229 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:48,584 1420229 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:48,584 1420229 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:48,584 1420229 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:48,584 1420229 [http-bio-8080-exec-8] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:48,584 1420229 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:48,584 1420229 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 17:59:48,585 1420230 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@3eae2966]
2017-07-11 17:59:48,585 1420230 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:48,585 1420230 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 17:59:48,585 1420230 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 17:59:48,585 1420230 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 17:59:48,585 1420230 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 17:59:48,585 1420230 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 17:59:48,585 1420230 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 17:59:48,585 1420230 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 17:59:48,585 1420230 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 17:59:48,585 1420230 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 17:59:48,587 1420232 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@3eae2966] after transaction
2017-07-11 17:59:48,587 1420232 [http-bio-8080-exec-8] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:48,588 1420233 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=kta2ysg3
2017-07-11 17:59:48,606 1420251 [clientInboundChannel-43] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=kta2ysg3
2017-07-11 17:59:48,683 1420328 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:48,683 1420328 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'OPTIONS /' doesn't match 'GET /chat/**
2017-07-11 17:59:48,683 1420328 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request '/' matched by universal pattern '/**'
2017-07-11 17:59:48,683 1420328 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / has an empty filter list
2017-07-11 17:59:48,683 1420328 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing OPTIONS request for [/]
2017-07-11 17:59:48,683 1420328 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:48,683 1420328 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:48,683 1420328 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:48,683 1420328 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:48,683 1420328 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:48,716 1420361 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,717 1420362 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:48,718 1420363 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:48,719 1420364 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:48,719 1420364 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:48,719 1420364 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:48,719 1420364 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 17:59:48,719 1420364 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 17:59:48,720 1420365 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 17:59:48,720 1420365 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 17:59:48,720 1420365 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 17:59:48,722 1420367 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 17:59:48,722 1420367 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:48,722 1420367 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:48,722 1420367 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:48,723 1420368 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 17:59:48,782 1420427 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 17:59:48,783 1420428 [http-bio-8080-exec-2] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 17:59:48,783 1420428 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 17:59:48,783 1420428 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 17:59:48,783 1420428 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 17:59:48,783 1420428 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 17:59:48,783 1420428 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 17:59:48,783 1420428 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 17:59:48,783 1420428 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 17:59:48,783 1420428 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 17:59:48,783 1420428 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 17:59:48,783 1420428 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 17:59:48,784 1420429 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 17:59:48,785 1420430 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 17:59:48,785 1420430 [http-bio-8080-exec-2] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 17:59:48,785 1420430 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 17:59:48,785 1420430 [http-bio-8080-exec-2] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 17:59:48,785 1420430 [http-bio-8080-exec-2] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 17:59:48,785 1420430 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 17:59:48,785 1420430 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,792 1420437 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 17:59:48,792 1420437 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 17:59:48,792 1420437 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 17:59:48,792 1420437 [http-bio-8080-exec-2] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 17:59:48,792 1420437 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 17:59:48,792 1420437 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 17:59:48,792 1420437 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 17:59:48,792 1420437 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 17:59:48,792 1420437 [http-bio-8080-exec-2] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 17:59:48,793 1420438 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:48,793 1420438 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:48,793 1420438 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,800 1420445 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:48,800 1420445 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:59:48,801 1420446 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:48,801 1420446 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:48,801 1420446 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:48,801 1420446 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 17:59:48,801 1420446 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:48,802 1420447 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:48,802 1420447 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:48,802 1420447 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 17:59:48,802 1420447 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 17:59:48,802 1420447 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:48,802 1420447 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 17:59:48,802 1420447 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:48,802 1420447 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:48,802 1420447 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:48,802 1420447 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:48,803 1420448 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:48,803 1420448 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:48,803 1420448 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,812 1420457 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,813 1420458 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:48,814 1420459 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,815 1420460 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:48,815 1420460 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,815 1420460 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:48,815 1420460 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,815 1420460 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:48,816 1420461 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:48,816 1420461 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:48,816 1420461 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:48,816 1420461 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:48,817 1420462 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:48,817 1420462 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,829 1420474 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:48,829 1420474 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:48,830 1420475 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 17:59:48,830 1420475 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:48,830 1420475 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:48,830 1420475 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:48,830 1420475 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 17:59:48,830 1420475 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:48,830 1420475 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:48,830 1420475 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:48,830 1420475 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:48,831 1420476 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:48,831 1420476 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:48,831 1420476 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,838 1420483 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:48,838 1420483 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 17:59:48,840 1420485 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:48,840 1420485 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:48,840 1420485 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:48,840 1420485 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 17:59:48,840 1420485 [http-bio-8080-exec-2] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 17:59:48,840 1420485 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:48,840 1420485 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 17:59:48,840 1420485 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 17:59:48,840 1420485 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:48,840 1420485 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:48,840 1420485 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:48,841 1420486 [http-bio-8080-exec-2] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 17:59:48,841 1420486 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 17:59:48,841 1420486 [http-bio-8080-exec-2] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 17:59:48,847 1420492 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,847 1420492 [http-bio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 17:59:48,849 1420494 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,849 1420494 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 17:59:48,849 1420494 [http-bio-8080-exec-2] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,849 1420494 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 17:59:48,849 1420494 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 17:59:48,849 1420494 [http-bio-8080-exec-2] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 17:59:48,849 1420494 [http-bio-8080-exec-2] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 17:59:48,849 1420494 [http-bio-8080-exec-2] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 17:59:48,849 1420494 [http-bio-8080-exec-2] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 17:59:48,851 1420496 [http-bio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 17:59:48,851 1420496 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 17:59:48,851 1420496 [http-bio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 17:59:48,851 1420496 [http-bio-8080-exec-2] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 17:59:48,851 1420496 [http-bio-8080-exec-2] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 17:59:56,797 1428442 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [jfk2nnzj]
2017-07-11 18:00:04,467 1436112 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=kta2ysg3] closed with CloseStatus[code=1000, reason=null]
2017-07-11 18:00:04,467 1436112 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session kta2ysg3
2017-07-11 18:00:04,469 1436114 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=kta2ysg3
2017-07-11 18:00:04,469 1436114 [clientOutboundChannel-72] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=kta2ysg3}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=kta2ysg3}]
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:05,875 1437520 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:05,876 1437521 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:05,877 1437522 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:05,877 1437522 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:05,877 1437522 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:05,877 1437522 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:05,877 1437522 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 18:00:05,877 1437522 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 18:00:05,877 1437522 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 18:00:05,877 1437522 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 18:00:05,877 1437522 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 18:00:05,878 1437523 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 18:00:05,878 1437523 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:05,878 1437523 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:05,878 1437523 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:05,878 1437523 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:05,880 1437525 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:05,881 1437526 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:05,881 1437526 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:05,881 1437526 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 18:00:05,881 1437526 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:05,881 1437526 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 18:00:05,881 1437526 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:05,881 1437526 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 18:00:05,881 1437526 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:05,881 1437526 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 18:00:05,881 1437526 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:05,881 1437526 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:05,882 1437527 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 18:00:05,883 1437528 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 18:00:05,883 1437528 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 18:00:05,883 1437528 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 18:00:05,883 1437528 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 18:00:05,884 1437529 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 18:00:05,884 1437529 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:05,884 1437529 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:05,884 1437529 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:05,884 1437529 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:05,940 1437585 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:05,941 1437586 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:05,942 1437587 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 18:00:05,942 1437587 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 18:00:05,942 1437587 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 18:00:05,942 1437587 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 18:00:05,942 1437587 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 18:00:05,942 1437587 [http-bio-8080-exec-1] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 18:00:05,943 1437588 [http-bio-8080-exec-1] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 18:00:05,943 1437588 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 18:00:05,943 1437588 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:05,952 1437597 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 18:00:05,952 1437597 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 18:00:05,952 1437597 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 18:00:05,952 1437597 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 18:00:05,952 1437597 [http-bio-8080-exec-1] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 18:00:05,953 1437598 [http-bio-8080-exec-1] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:05,953 1437598 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:05,953 1437598 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:05,959 1437604 [http-bio-8080-exec-1] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:05,959 1437604 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 18:00:05,960 1437605 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 18:00:05,960 1437605 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:05,960 1437605 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:05,960 1437605 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 18:00:05,960 1437605 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:05,960 1437605 [http-bio-8080-exec-1] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 18:00:05,960 1437605 [http-bio-8080-exec-1] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:05,960 1437605 [http-bio-8080-exec-1] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:05,960 1437605 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:05,961 1437606 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 18:00:05,961 1437606 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:05,961 1437606 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:05,961 1437606 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:05,961 1437606 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:05,967 1437612 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:05,967 1437612 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 18:00:05,967 1437612 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 18:00:05,967 1437612 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:05,967 1437612 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 18:00:05,967 1437612 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:05,967 1437612 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 18:00:05,967 1437612 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:05,968 1437613 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 18:00:05,969 1437614 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 18:00:05,970 1437615 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 18:00:05,970 1437615 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 18:00:05,970 1437615 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 18:00:05,970 1437615 [http-bio-8080-exec-1] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 18:00:05,970 1437615 [http-bio-8080-exec-1] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 18:00:05,971 1437616 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 18:00:05,971 1437616 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:05,978 1437623 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 18:00:05,978 1437623 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 18:00:05,978 1437623 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 18:00:05,978 1437623 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 18:00:05,978 1437623 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 18:00:05,978 1437623 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 18:00:05,978 1437623 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 18:00:05,978 1437623 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 18:00:05,978 1437623 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 18:00:05,978 1437623 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 18:00:05,978 1437623 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 18:00:05,979 1437624 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 18:00:05,980 1437625 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 18:00:05,981 1437626 [http-bio-8080-exec-1] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 18:00:05,982 1437627 [http-bio-8080-exec-1] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:05,982 1437627 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:05,982 1437627 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:05,990 1437635 [http-bio-8080-exec-1] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 18:00:05,990 1437635 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 18:00:05,991 1437636 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:05,991 1437636 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 18:00:05,991 1437636 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 18:00:05,991 1437636 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 18:00:05,991 1437636 [http-bio-8080-exec-1] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:05,991 1437636 [http-bio-8080-exec-1] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 18:00:05,991 1437636 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:05,992 1437637 [http-bio-8080-exec-1] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:05,992 1437637 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:05,992 1437637 [http-bio-8080-exec-1] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:05,998 1437643 [http-bio-8080-exec-1] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 18:00:05,998 1437643 [http-bio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 18:00:05,998 1437643 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:05,999 1437644 [http-bio-8080-exec-1] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 18:00:05,999 1437644 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 18:00:05,999 1437644 [http-bio-8080-exec-1] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 18:00:05,999 1437644 [http-bio-8080-exec-1] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:05,999 1437644 [http-bio-8080-exec-1] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 18:00:05,999 1437644 [http-bio-8080-exec-1] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:06,000 1437645 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 18:00:06,000 1437645 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:06,001 1437646 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:06,001 1437646 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:06,001 1437646 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:06,014 1437659 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:06,014 1437659 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 18:00:06,014 1437659 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785206012 has an empty filter list
2017-07-11 18:00:06,014 1437659 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 18:00:06,014 1437659 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 18:00:06,014 1437659 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 18:00:06,014 1437659 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 18:00:06,014 1437659 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 18:00:06,014 1437659 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 18:00:06,014 1437659 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 18:00:06,015 1437660 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785206012
2017-07-11 18:00:06,015 1437660 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:06,015 1437660 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:06,116 1437761 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/663/1rmjg10i/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:06,116 1437761 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/663/1rmjg10i/websocket'; against '/chat/**'
2017-07-11 18:00:06,116 1437761 [http-bio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - /chat/663/1rmjg10i/websocket has an empty filter list
2017-07-11 18:00:06,116 1437761 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/663/1rmjg10i/websocket]
2017-07-11 18:00:06,116 1437761 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/663/1rmjg10i/websocket
2017-07-11 18:00:06,116 1437761 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/663/1rmjg10i/websocket]
2017-07-11 18:00:06,117 1437762 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/663/1rmjg10i/websocket] are [/chat/**]
2017-07-11 18:00:06,117 1437762 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/663/1rmjg10i/websocket] are {}
2017-07-11 18:00:06,117 1437762 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/663/1rmjg10i/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 18:00:06,117 1437762 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/663/1rmjg10i/websocket] is: -1
2017-07-11 18:00:06,117 1437762 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/663/1rmjg10i/websocket
2017-07-11 18:00:06,118 1437763 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:06,118 1437763 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:06,119 1437764 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1rmjg10i]
2017-07-11 18:00:06,141 1437786 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 18:00:06,141 1437786 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@311fe3d9] for JPA transaction
2017-07-11 18:00:06,141 1437786 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:06,141 1437786 [http-bio-8080-exec-8] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:06,147 1437792 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@241fcbc1]
2017-07-11 18:00:06,147 1437792 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 18:00:06,148 1437793 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 18:00:06,148 1437793 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 18:00:06,148 1437793 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 18:00:06,148 1437793 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 18:00:06,148 1437793 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:06,148 1437793 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 18:00:06,149 1437794 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 18:00:06,149 1437794 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:06,149 1437794 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:06,149 1437794 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 18:00:06,149 1437794 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:06,149 1437794 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 18:00:06,149 1437794 [http-bio-8080-exec-8] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:06,149 1437794 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:06,149 1437794 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 18:00:06,150 1437795 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@311fe3d9]
2017-07-11 18:00:06,150 1437795 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:06,150 1437795 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 18:00:06,150 1437795 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 18:00:06,150 1437795 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 18:00:06,150 1437795 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 18:00:06,150 1437795 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 18:00:06,150 1437795 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 18:00:06,150 1437795 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 18:00:06,150 1437795 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 18:00:06,150 1437795 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 18:00:06,151 1437796 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@311fe3d9] after transaction
2017-07-11 18:00:06,151 1437796 [http-bio-8080-exec-8] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 18:00:06,151 1437796 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=1rmjg10i
2017-07-11 18:00:06,155 1437800 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=1rmjg10i
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 18:00:06,392 1438037 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 18:00:06,393 1438038 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:06,394 1438039 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:06,394 1438039 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 18:00:06,394 1438039 [http-bio-8080-exec-5] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:06,394 1438039 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:06,394 1438039 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:06,394 1438039 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:06,394 1438039 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 18:00:06,394 1438039 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 18:00:06,394 1438039 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 18:00:06,394 1438039 [http-bio-8080-exec-5] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 18:00:06,394 1438039 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 18:00:06,395 1438040 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 18:00:06,395 1438040 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:06,395 1438040 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:06,395 1438040 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:06,395 1438040 [http-bio-8080-exec-5] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:06,478 1438123 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:06,479 1438124 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 18:00:06,479 1438124 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 18:00:06,479 1438124 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:06,479 1438124 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 18:00:06,479 1438124 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:06,479 1438124 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 18:00:06,479 1438124 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:06,479 1438124 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 18:00:06,479 1438124 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:06,479 1438124 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:06,479 1438124 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:06,480 1438125 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 18:00:06,481 1438126 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 18:00:06,482 1438127 [http-bio-8080-exec-5] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 18:00:06,483 1438128 [http-bio-8080-exec-5] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 18:00:06,483 1438128 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 18:00:06,483 1438128 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:06,491 1438136 [http-bio-8080-exec-5] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 18:00:06,492 1438137 [http-bio-8080-exec-5] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 18:00:06,492 1438137 [http-bio-8080-exec-5] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 18:00:06,492 1438137 [http-bio-8080-exec-5] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 18:00:06,492 1438137 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 18:00:06,492 1438137 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 18:00:06,492 1438137 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 18:00:06,492 1438137 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 18:00:06,492 1438137 [http-bio-8080-exec-5] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 18:00:06,492 1438137 [http-bio-8080-exec-5] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:06,492 1438137 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:06,492 1438137 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:06,498 1438143 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 18:00:06,498 1438143 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 18:00:06,499 1438144 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 18:00:06,499 1438144 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:06,499 1438144 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 18:00:06,499 1438144 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 18:00:06,499 1438144 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 18:00:06,499 1438144 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 18:00:06,500 1438145 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 18:00:06,500 1438145 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 18:00:06,500 1438145 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 18:00:06,500 1438145 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 18:00:06,500 1438145 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 18:00:06,500 1438145 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 18:00:06,500 1438145 [http-bio-8080-exec-5] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:06,500 1438145 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:06,500 1438145 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:06,500 1438145 [http-bio-8080-exec-5] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:06,501 1438146 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:06,501 1438146 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:06,506 1438151 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:06,506 1438151 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 18:00:06,507 1438152 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 18:00:06,507 1438152 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:06,507 1438152 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:06,507 1438152 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 18:00:06,507 1438152 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:06,507 1438152 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 18:00:06,507 1438152 [http-bio-8080-exec-5] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:06,507 1438152 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:06,507 1438152 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:06,508 1438153 [http-bio-8080-exec-5] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:06,508 1438153 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:06,508 1438153 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:06,514 1438159 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:06,514 1438159 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 18:00:06,514 1438159 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 18:00:06,515 1438160 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:06,515 1438160 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:06,515 1438160 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 18:00:06,515 1438160 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:06,515 1438160 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 18:00:06,515 1438160 [http-bio-8080-exec-5] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:06,515 1438160 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:06,515 1438160 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:06,515 1438160 [http-bio-8080-exec-5] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:06,515 1438160 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:06,515 1438160 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:06,522 1438167 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 18:00:06,522 1438167 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 18:00:06,522 1438167 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 18:00:06,523 1438168 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:06,523 1438168 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 18:00:06,523 1438168 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 18:00:06,523 1438168 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 18:00:06,523 1438168 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 18:00:06,523 1438168 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 18:00:06,523 1438168 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 18:00:06,523 1438168 [http-bio-8080-exec-5] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:06,523 1438168 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:06,523 1438168 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:06,524 1438169 [http-bio-8080-exec-5] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:06,524 1438169 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:06,524 1438169 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:06,529 1438174 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:06,529 1438174 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 18:00:06,530 1438175 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 18:00:06,530 1438175 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:06,530 1438175 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:06,530 1438175 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 18:00:06,530 1438175 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:06,530 1438175 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 18:00:06,530 1438175 [http-bio-8080-exec-5] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:06,530 1438175 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:06,530 1438175 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:06,532 1438177 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 18:00:06,532 1438177 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:06,532 1438177 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:06,532 1438177 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:06,532 1438177 [http-bio-8080-exec-5] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:11,797 1443442 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [kta2ysg3]
2017-07-11 18:00:34,634 1466279 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1rmjg10i] closed with CloseStatus[code=1000, reason=null]
2017-07-11 18:00:34,634 1466279 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1rmjg10i
2017-07-11 18:00:34,635 1466280 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1rmjg10i
2017-07-11 18:00:34,635 1466280 [clientOutboundChannel-74] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=1rmjg10i}], simpUser=org.springframework.security.authentication.UsernamePasswordAuthenticationToken@1d232a99: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_ADMIN, simpSessionId=1rmjg10i}]
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:35,922 1467567 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:35,923 1467568 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:35,924 1467569 [http-bio-8080-exec-1] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:35,924 1467569 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:35,924 1467569 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:35,924 1467569 [http-bio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:35,924 1467569 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 18:00:35,924 1467569 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 18:00:35,924 1467569 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 18:00:35,924 1467569 [http-bio-8080-exec-1] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 18:00:35,924 1467569 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 18:00:35,926 1467571 [http-bio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 18:00:35,926 1467571 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:35,926 1467571 [http-bio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:35,926 1467571 [http-bio-8080-exec-1] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:35,926 1467571 [http-bio-8080-exec-1] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:35,928 1467573 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:35,929 1467574 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 18:00:35,930 1467575 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 18:00:35,931 1467576 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 18:00:35,931 1467576 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:35,931 1467576 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:35,931 1467576 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:35,931 1467576 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/chat/**'
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token'
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/token_key'
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/oauth/check_token'
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1/users'; against '/logout'
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /logout
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'PUT /logout
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'DELETE /logout
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:35,973 1467618 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'POST /oauth/token
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1/users' doesn't match 'OPTIONS /**
2017-07-11 18:00:35,974 1467619 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1/users; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:35,975 1467620 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:35,975 1467620 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:35,975 1467620 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:35,975 1467620 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:35,975 1467620 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1/users reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:35,975 1467620 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1/users]
2017-07-11 18:00:35,975 1467620 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1/users
2017-07-11 18:00:35,975 1467620 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.UserDto> com.chattio.controller.DialogController.fetchDialogUsers(java.lang.Long,java.security.Principal)]
2017-07-11 18:00:35,975 1467620 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 18:00:35,976 1467621 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1/users] is: -1
2017-07-11 18:00:35,977 1467622 [http-bio-8080-exec-9] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 18:00:35,977 1467622 [http-bio-8080-exec-9] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.dialogUsers as generatedAlias0 where ( generatedAlias1.id=1L ) and ( generatedAlias0.email<>:param0 )
2017-07-11 18:00:35,978 1467623 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user2_.id_user as id_user1_4_,
        user2_.active as active2_4_,
        user2_.email as email3_4_,
        user2_.full_name as full_nam4_4_,
        user2_.password as password5_4_ 
    from
        dialogs dialog0_ 
    inner join
        dialogs_users dialoguser1_ 
            on dialog0_.id_dialog=dialoguser1_.id_dialog 
    inner join
        users user2_ 
            on dialoguser1_.id_user=user2_.id_user 
    where
        dialog0_.id_dialog=1 
        and user2_.email<>?
2017-07-11 18:00:35,978 1467623 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:35,993 1467638 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 18:00:35,993 1467638 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#1]
2017-07-11 18:00:35,993 1467638 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 18:00:35,993 1467638 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 18:00:35,993 1467638 [http-bio-8080-exec-9] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 18:00:35,994 1467639 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:35,994 1467639 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:35,994 1467639 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:36,000 1467645 [http-bio-8080-exec-9] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,000 1467645 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 18:00:36,001 1467646 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,001 1467646 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:36,001 1467646 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,001 1467646 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 18:00:36,001 1467646 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,001 1467646 [http-bio-8080-exec-9] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 18:00:36,001 1467646 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:36,001 1467646 [http-bio-8080-exec-9] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:36,001 1467646 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:36,003 1467648 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[com.chattio.dto.UserDto@4934f3c1]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 18:00:36,003 1467648 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:36,003 1467648 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:36,003 1467648 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:36,003 1467648 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/chat/**'
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token'
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/token_key'
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/oauth/check_token'
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialog/1'; against '/logout'
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /logout
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'PUT /logout
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'DELETE /logout
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:36,012 1467657 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN'
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'POST /oauth/token
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialog/1' doesn't match 'OPTIONS /**
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialog/1; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@5c5afb11: Principal: someone@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_ADMIN
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:36,013 1467658 [http-bio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - /dialog/1 reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:36,014 1467659 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialog/1]
2017-07-11 18:00:36,014 1467659 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialog/1
2017-07-11 18:00:36,014 1467659 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.MessageDto> com.chattio.controller.DialogController.fetchMessages(java.lang.Long)]
2017-07-11 18:00:36,014 1467659 [http-bio-8080-exec-9] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 18:00:36,014 1467659 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialog/1] is: -1
2017-07-11 18:00:36,014 1467659 [http-bio-8080-exec-9] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 18:00:36,015 1467660 [http-bio-8080-exec-9] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from Dialog as generatedAlias1 inner join generatedAlias1.messages as generatedAlias0 where generatedAlias1.id=1L
2017-07-11 18:00:36,015 1467660 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        messages1_.id_message as id_messa1_2_,
        messages1_.date_time as date_tim2_2_,
        messages1_.id_dialog as id_dialo4_2_,
        messages1_.id_user as id_user5_2_,
        messages1_.value as value3_2_ 
    from
        dialogs dialog0_ 
    inner join
        messages messages1_ 
            on dialog0_.id_dialog=messages1_.id_dialog 
    where
        dialog0_.id_dialog=1
2017-07-11 18:00:36,015 1467660 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#1]
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#2]
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 2
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#3]
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 3
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#4]
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 4
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#5]
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 5
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#6]
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 6
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#7]
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 7
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#8]
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 8
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#9]
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 9
2017-07-11 18:00:36,022 1467667 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#10]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 10
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#11]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 11
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#12]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 12
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#13]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 13
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#14]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 14
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#15]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 15
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#16]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 16
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#17]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 17
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#18]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 18
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#19]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 19
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#20]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result set row: 20
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Message#21]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#1]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#1]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#2]
2017-07-11 18:00:36,023 1467668 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#2]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#3]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#3]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#4]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#4]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#5]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#5]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#6]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#6]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#7]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#7]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#8]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#8]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#9]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#9]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#10]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#10]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#11]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#11]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#12]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#12]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#13]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#13]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#14]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#14]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#15]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#15]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#16]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#16]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#17]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#17]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#18]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#18]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#19]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#19]
2017-07-11 18:00:36,024 1467669 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#20]
2017-07-11 18:00:36,025 1467670 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#20]
2017-07-11 18:00:36,025 1467670 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Message#21]
2017-07-11 18:00:36,025 1467670 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Message#21]
2017-07-11 18:00:36,025 1467670 [http-bio-8080-exec-9] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 18:00:36,025 1467670 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:36,025 1467670 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:36,025 1467670 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:36,031 1467676 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#1]
2017-07-11 18:00:36,031 1467676 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 18:00:36,032 1467677 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:36,032 1467677 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 18:00:36,032 1467677 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 18:00:36,032 1467677 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 18:00:36,032 1467677 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:36,032 1467677 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#1
2017-07-11 18:00:36,033 1467678 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:36,033 1467678 [http-bio-8080-exec-9] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:36,033 1467678 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:36,033 1467678 [http-bio-8080-exec-9] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:36,039 1467684 [http-bio-8080-exec-9] DEBUG org.hibernate.internal.SessionImpl - Initializing proxy: [com.chattio.entity.User#2]
2017-07-11 18:00:36,039 1467684 [http-bio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_0_,
        user0_.active as active2_4_0_,
        user0_.email as email3_4_0_,
        user0_.full_name as full_nam4_4_0_,
        user0_.password as password5_4_0_ 
    from
        users user0_ 
    where
        user0_.id_user=?
2017-07-11 18:00:36,040 1467685 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:36,040 1467685 [http-bio-8080-exec-9] DEBUG o.h.l.p.e.p.i.EntityReferenceInitializerImpl - On call to EntityIdentifierReaderImpl#resolve, EntityKey was already known; should only happen on root returns with an optional identifier specified
2017-07-11 18:00:36,040 1467685 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 18:00:36,040 1467685 [http-bio-8080-exec-9] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 18:00:36,040 1467685 [http-bio-8080-exec-9] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:36,040 1467685 [http-bio-8080-exec-9] DEBUG o.h.l.e.p.AbstractLoadPlanBasedEntityLoader - Done entity load : com.chattio.entity.User#2
2017-07-11 18:00:36,040 1467685 [http-bio-8080-exec-9] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:36,042 1467687 [http-bio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[MessageDto{id=1}, MessageDto{id=2}, MessageDto{id=3}, MessageDto{id=4}, MessageDto{id=5}, MessageDto{id=6}, MessageDto{id=7}, MessageDto{id=8}, MessageDto{id=9}, MessageDto{id=10}, MessageDto{id=11}, MessageDto{id=12}, MessageDto{id=13}, MessageDto{id=14}, MessageDto{id=15}, MessageDto{id=16}, MessageDto{id=17}, MessageDto{id=18}, MessageDto{id=19}, MessageDto{id=20}, MessageDto{id=21}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 18:00:36,042 1467687 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:36,042 1467687 [http-bio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:36,042 1467687 [http-bio-8080-exec-9] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:36,042 1467687 [http-bio-8080-exec-9] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:36,055 1467700 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/info' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:36,055 1467700 [http-bio-8080-exec-4] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/info'; against '/chat/**'
2017-07-11 18:00:36,056 1467701 [http-bio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - /chat/info?t=1499785236053 has an empty filter list
2017-07-11 18:00:36,056 1467701 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/info]
2017-07-11 18:00:36,056 1467701 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/info
2017-07-11 18:00:36,056 1467701 [http-bio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/info]
2017-07-11 18:00:36,056 1467701 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/info] are [/chat/**]
2017-07-11 18:00:36,056 1467701 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/info] are {}
2017-07-11 18:00:36,056 1467701 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/info] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 18:00:36,056 1467701 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/info] is: -1
2017-07-11 18:00:36,056 1467701 [http-bio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/info?t=1499785236053
2017-07-11 18:00:36,056 1467701 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:36,056 1467701 [http-bio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:36,166 1467811 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /chat/746/rnlrdati/websocket' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:36,167 1467812 [http-bio-8080-exec-8] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/chat/746/rnlrdati/websocket'; against '/chat/**'
2017-07-11 18:00:36,167 1467812 [http-bio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - /chat/746/rnlrdati/websocket has an empty filter list
2017-07-11 18:00:36,167 1467812 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/chat/746/rnlrdati/websocket]
2017-07-11 18:00:36,167 1467812 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /chat/746/rnlrdati/websocket
2017-07-11 18:00:36,167 1467812 [http-bio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Did not find handler method for [/chat/746/rnlrdati/websocket]
2017-07-11 18:00:36,167 1467812 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Matching patterns for request [/chat/746/rnlrdati/websocket] are [/chat/**]
2017-07-11 18:00:36,167 1467812 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - URI Template variables for request [/chat/746/rnlrdati/websocket] are {}
2017-07-11 18:00:36,167 1467812 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapping [/chat/746/rnlrdati/websocket] to HandlerExecutionChain with handler [org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7d6f941] and 1 interceptor
2017-07-11 18:00:36,167 1467812 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/chat/746/rnlrdati/websocket] is: -1
2017-07-11 18:00:36,167 1467812 [http-bio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/chat/746/rnlrdati/websocket
2017-07-11 18:00:36,169 1467814 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:36,169 1467814 [http-bio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:36,170 1467815 [http-bio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rnlrdati]
2017-07-11 18:00:36,226 1467871 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.chattio.service.impl.UserDetailsServiceImpl.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2017-07-11 18:00:36,227 1467872 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@76228053] for JPA transaction
2017-07-11 18:00:36,227 1467872 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:36,227 1467872 [http-bio-8080-exec-8] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:36,233 1467878 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC transaction [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@38d30e2]
2017-07-11 18:00:36,234 1467879 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        user0_.id_user as id_user1_4_,
        user0_.active as active2_4_,
        user0_.email as email3_4_,
        user0_.full_name as full_nam4_4_,
        user0_.password as password5_4_ 
    from
        users user0_ 
    where
        user0_.email=?
2017-07-11 18:00:36,234 1467879 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 18:00:36,235 1467880 [http-bio-8080-exec-8] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.User#2]
2017-07-11 18:00:36,235 1467880 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 18:00:36,235 1467880 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 18:00:36,235 1467880 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:36,235 1467880 [http-bio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 18:00:36,236 1467881 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 18:00:36,236 1467881 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:36,236 1467881 [http-bio-8080-exec-8] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:36,236 1467881 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 18:00:36,236 1467881 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:36,236 1467881 [http-bio-8080-exec-8] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 18:00:36,236 1467881 [http-bio-8080-exec-8] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:36,236 1467881 [http-bio-8080-exec-8] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@76228053]
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Processing flush-time cascades
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Dirty checking collections
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.dialogs#2], was: [com.chattio.entity.User.dialogs#2] (uninitialized)
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.messages#2], was: [com.chattio.entity.User.messages#2] (uninitialized)
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.h.engine.internal.Collections - Collection found: [com.chattio.entity.User.roles#2], was: [com.chattio.entity.User.roles#2] (initialized)
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.h.e.i.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 3 collections
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - Listing entities:
2017-07-11 18:00:36,237 1467882 [http-bio-8080-exec-8] DEBUG o.h.internal.util.EntityPrinter - com.chattio.entity.User{password=qwerty, roles=[1], active=true, fullName=Some Another, messages=<uninitialized>, id=2, dialogs=<uninitialized>, email=someone@gmail.com}
2017-07-11 18:00:36,238 1467883 [http-bio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [org.hibernate.jpa.internal.EntityManagerImpl@76228053] after transaction
2017-07-11 18:00:36,238 1467883 [http-bio-8080-exec-8] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 18:00:36,238 1467883 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=someone@gmail.com session=rnlrdati
2017-07-11 18:00:36,252 1467897 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/1/messages id=sub-0 session=rnlrdati
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/chat/**'
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token'
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/token_key'
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/oauth/check_token'
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:36,760 1468405 [http-bio-8080-exec-5] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:36,761 1468406 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:36,761 1468406 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:36,761 1468406 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/'; against '/logout'
2017-07-11 18:00:36,761 1468406 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:36,761 1468406 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /logout
2017-07-11 18:00:36,761 1468406 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:36,761 1468406 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'PUT /logout
2017-07-11 18:00:36,761 1468406 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:36,761 1468406 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'DELETE /logout
2017-07-11 18:00:36,761 1468406 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:36,761 1468406 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'POST /oauth/token
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /' doesn't match 'OPTIONS /**
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - / reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:36,762 1468407 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/]
2017-07-11 18:00:36,763 1468408 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /
2017-07-11 18:00:36,763 1468408 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.String com.chattio.controller.TestController.base()]
2017-07-11 18:00:36,763 1468408 [http-bio-8080-exec-5] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'testController'
2017-07-11 18:00:36,763 1468408 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/] is: -1
2017-07-11 18:00:36,764 1468409 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [SERVER WORKS!] as "application/json" using [org.springframework.http.converter.StringHttpMessageConverter@2434a827]
2017-07-11 18:00:36,764 1468409 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:36,764 1468409 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:36,764 1468409 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:36,764 1468409 [http-bio-8080-exec-5] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/chat/**'
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token']
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token'
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/token_key']
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/token_key'
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/oauth/check_token']
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/oauth/check_token'
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 1 of 11 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 2 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 3 of 11 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.h.writers.HstsHeaderWriter - Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@72224f4b
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 4 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', GET]
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Checking match of request : '/dialogs'; against '/logout'
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', POST]
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /logout
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', PUT]
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'PUT /logout
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - Trying to match using Ant [pattern='/logout', DELETE]
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'DELETE /logout
2017-07-11 18:00:36,832 1468477 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.matcher.OrRequestMatcher - No matches found
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 5 of 11 in additional filter chain; firing Filter: 'OAuth2AuthenticationProcessingFilter'
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.s.o.p.a.OAuth2AuthenticationProcessingFilter - Authentication success: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER'
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.s.CompositeSessionAuthenticationStrategy - Delegating to org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy@6ae5c4c8
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /oauth/token
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'POST /oauth/token
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.s.w.u.m.AntPathRequestMatcher - Request 'GET /dialogs' doesn't match 'OPTIONS /**
2017-07-11 18:00:36,833 1468478 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: /dialogs; Attributes: [#oauth2.throwOnError(authenticated)]
2017-07-11 18:00:36,834 1468479 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Previously Authenticated: org.springframework.security.oauth2.provider.OAuth2Authentication@90084dda: Principal: yevhen@gmail.com; Credentials: [PROTECTED]; Authenticated: true; Details: remoteAddress=0:0:0:0:0:0:0:1, tokenType=BearertokenValue=<TOKEN>; Granted Authorities: ROLE_USER
2017-07-11 18:00:36,834 1468479 [http-bio-8080-exec-5] DEBUG o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.web.access.expression.WebExpressionVoter@73495e5f, returned: 1
2017-07-11 18:00:36,834 1468479 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - Authorization successful
2017-07-11 18:00:36,834 1468479 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.i.FilterSecurityInterceptor - RunAsManager did not change Authentication object
2017-07-11 18:00:36,834 1468479 [http-bio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - /dialogs reached end of additional filter chain; proceeding with original chain
2017-07-11 18:00:36,834 1468479 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - DispatcherServlet with name 'SpringDispatcher' processing GET request for [/dialogs]
2017-07-11 18:00:36,834 1468479 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /dialogs
2017-07-11 18:00:36,834 1468479 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.util.List<com.chattio.dto.DialogDto> com.chattio.controller.DialogController.fetchUserDialogs(java.security.Principal)]
2017-07-11 18:00:36,834 1468479 [http-bio-8080-exec-5] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'dialogController'
2017-07-11 18:00:36,834 1468479 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Last-Modified value for [/dialogs] is: -1
2017-07-11 18:00:36,834 1468479 [http-bio-8080-exec-5] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2017-07-11 18:00:36,835 1468480 [http-bio-8080-exec-5] DEBUG o.h.jpa.criteria.CriteriaQueryImpl - Rendered criteria query -> select generatedAlias0 from User as generatedAlias1 inner join generatedAlias1.dialogs as generatedAlias0 where generatedAlias1.email=:param0
2017-07-11 18:00:36,835 1468480 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        dialog2_.id_dialog as id_dialo1_0_,
        dialog2_.dialog_name as dialog_n2_0_ 
    from
        users user0_ 
    inner join
        dialogs_users dialogs1_ 
            on user0_.id_user=dialogs1_.id_user 
    inner join
        dialogs dialog2_ 
            on dialogs1_.id_dialog=dialog2_.id_dialog 
    where
        user0_.email=?
2017-07-11 18:00:36,835 1468480 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:36,841 1468486 [http-bio-8080-exec-5] DEBUG org.hibernate.loader.Loader - Result set row: 0
2017-07-11 18:00:36,841 1468486 [http-bio-8080-exec-5] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#1]
2017-07-11 18:00:36,841 1468486 [http-bio-8080-exec-5] DEBUG org.hibernate.loader.Loader - Result set row: 1
2017-07-11 18:00:36,841 1468486 [http-bio-8080-exec-5] DEBUG org.hibernate.loader.Loader - Result row: EntityKey[com.chattio.entity.Dialog#2]
2017-07-11 18:00:36,841 1468486 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#1]
2017-07-11 18:00:36,841 1468486 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#1]
2017-07-11 18:00:36,841 1468486 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.Dialog#2]
2017-07-11 18:00:36,841 1468486 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.Dialog#2]
2017-07-11 18:00:36,841 1468486 [http-bio-8080-exec-5] DEBUG o.s.o.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2017-07-11 18:00:36,842 1468487 [http-bio-8080-exec-5] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:36,842 1468487 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:36,842 1468487 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:36,850 1468495 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 18:00:36,850 1468495 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 18:00:36,850 1468495 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 18:00:36,850 1468495 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #1
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#2]
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#2]
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#1]
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:36,851 1468496 [http-bio-8080-exec-5] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:36,852 1468497 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:36,852 1468497 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:36,856 1468501 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,856 1468501 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 18:00:36,856 1468501 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,856 1468501 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:36,856 1468501 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,856 1468501 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 18:00:36,856 1468501 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,856 1468501 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 18:00:36,856 1468501 [http-bio-8080-exec-5] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:36,856 1468501 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:36,856 1468501 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:36,857 1468502 [http-bio-8080-exec-5] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:36,857 1468502 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:36,857 1468502 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:36,862 1468507 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:36,862 1468507 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 18:00:36,863 1468508 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#2]
2017-07-11 18:00:36,863 1468508 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:36,863 1468508 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:36,863 1468508 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 18:00:36,863 1468508 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#2]
2017-07-11 18:00:36,863 1468508 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 18:00:36,863 1468508 [http-bio-8080-exec-5] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:36,863 1468508 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:36,863 1468508 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:36,864 1468509 [http-bio-8080-exec-5] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:36,864 1468509 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:36,864 1468509 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:36,868 1468513 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 18:00:36,868 1468513 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        dialoguser0_.id_dialog as id_dialo1_1_0_,
        dialoguser0_.id_user as id_user2_1_0_,
        user1_.id_user as id_user1_4_1_,
        user1_.active as active2_4_1_,
        user1_.email as email3_4_1_,
        user1_.full_name as full_nam4_4_1_,
        user1_.password as password5_4_1_ 
    from
        dialogs_users dialoguser0_ 
    inner join
        users user1_ 
            on dialoguser0_.id_user=user1_.id_user 
    where
        dialoguser0_.id_dialog=?
2017-07-11 18:00:36,869 1468514 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 18:00:36,869 1468514 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:36,869 1468514 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 18:00:36,869 1468514 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Resolving associations for [com.chattio.entity.User#1]
2017-07-11 18:00:36,869 1468514 [http-bio-8080-exec-5] DEBUG o.h.engine.internal.TwoPhaseLoad - Done materializing entity [com.chattio.entity.User#1]
2017-07-11 18:00:36,869 1468514 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 18:00:36,869 1468514 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.Dialog.dialogUsers#2]
2017-07-11 18:00:36,869 1468514 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.Dialog.dialogUsers
2017-07-11 18:00:36,869 1468514 [http-bio-8080-exec-5] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:36,869 1468514 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:36,869 1468514 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:36,870 1468515 [http-bio-8080-exec-5] DEBUG o.h.internal.SessionFactoryRegistry - Lookup: uid=481b4122-84cb-4db6-9974-50dc88480a6e
2017-07-11 18:00:36,870 1468515 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - begin
2017-07-11 18:00:36,870 1468515 [http-bio-8080-exec-5] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/chattiodb]
2017-07-11 18:00:36,875 1468520 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Loading collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,875 1468520 [http-bio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        roles0_.user as user1_3_0_,
        roles0_.role as role2_3_0_ 
    from
        user_roles roles0_ 
    where
        roles0_.user=?
2017-07-11 18:00:36,876 1468521 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Preparing collection intializer : [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,876 1468521 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.ResultSetProcessorImpl - Starting ResultSet row #0
2017-07-11 18:00:36,876 1468521 [http-bio-8080-exec-5] DEBUG o.h.l.p.e.p.i.CollectionReferenceInitializerImpl - Found row of collection: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,876 1468521 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections were found in result set for role: com.chattio.entity.User.roles
2017-07-11 18:00:36,876 1468521 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - Collection fully initialized: [com.chattio.entity.User.roles#1]
2017-07-11 18:00:36,876 1468521 [http-bio-8080-exec-5] DEBUG o.h.e.l.i.CollectionLoadContext - 1 collections initialized for role: com.chattio.entity.User.roles
2017-07-11 18:00:36,876 1468521 [http-bio-8080-exec-5] DEBUG o.h.r.j.i.ResourceRegistryStandardImpl - HHH000387: ResultSet's statement was not registered
2017-07-11 18:00:36,876 1468521 [http-bio-8080-exec-5] DEBUG o.h.l.c.p.AbstractLoadPlanBasedCollectionInitializer - Done loading collection
2017-07-11 18:00:36,876 1468521 [http-bio-8080-exec-5] DEBUG o.h.e.t.internal.TransactionImpl - committing
2017-07-11 18:00:36,877 1468522 [http-bio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [[DialogDto{id=1, dialogName='null'}, DialogDto{id=2, dialogName='null'}]] as "application/json" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@2c4b1528]
2017-07-11 18:00:36,877 1468522 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'SpringDispatcher': assuming HandlerAdapter completed request handling
2017-07-11 18:00:36,877 1468522 [http-bio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Successfully completed request
2017-07-11 18:00:36,877 1468522 [http-bio-8080-exec-5] DEBUG o.s.s.w.a.ExceptionTranslationFilter - Chain processed normally
2017-07-11 18:00:36,877 1468522 [http-bio-8080-exec-5] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as request processing completed
2017-07-11 18:00:41,797 1473442 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [1rmjg10i]
2017-07-11 18:49:19,373 4391018 [MessageBroker-2] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 78 total, 0 closed abnormally (0 connect failure, 0 send limit, 1 transport error)], stompSubProtocol[processed CONNECT(78)-CONNECTED(78)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 756], outboundChannelpool size = 0, active threads = 0, queued tasks = 0, completed tasks = 187], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 2, completed tasks = 443]
2017-07-11 20:21:04,237 9895882 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 78 total, 0 closed abnormally (0 connect failure, 0 send limit, 1 transport error)], stompSubProtocol[processed CONNECT(78)-CONNECTED(78)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 756], outboundChannelpool size = 0, active threads = 0, queued tasks = 0, completed tasks = 187], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 2, completed tasks = 876]
2017-07-11 20:51:04,284 11695929 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 78 total, 0 closed abnormally (0 connect failure, 0 send limit, 1 transport error)], stompSubProtocol[processed CONNECT(78)-CONNECTED(78)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 756], outboundChannelpool size = 0, active threads = 0, queued tasks = 0, completed tasks = 187], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 2, completed tasks = 1309]
2017-07-11 21:21:03,882 13495527 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 78 total, 0 closed abnormally (0 connect failure, 0 send limit, 1 transport error)], stompSubProtocol[processed CONNECT(78)-CONNECTED(78)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 756], outboundChannelpool size = 0, active threads = 0, queued tasks = 0, completed tasks = 187], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 2, completed tasks = 1742]
2017-07-11 21:51:03,934 15295579 [MessageBroker-2] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 78 total, 0 closed abnormally (0 connect failure, 0 send limit, 1 transport error)], stompSubProtocol[processed CONNECT(78)-CONNECTED(78)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 756], outboundChannelpool size = 0, active threads = 0, queued tasks = 0, completed tasks = 187], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 2, completed tasks = 2175]
2017-07-11 22:21:03,987 17095632 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 78 total, 0 closed abnormally (0 connect failure, 0 send limit, 1 transport error)], stompSubProtocol[processed CONNECT(78)-CONNECTED(78)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 756], outboundChannelpool size = 0, active threads = 0, queued tasks = 0, completed tasks = 187], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 2, completed tasks = 2608]
2017-07-11 22:51:04,039 18895684 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 78 total, 0 closed abnormally (0 connect failure, 0 send limit, 1 transport error)], stompSubProtocol[processed CONNECT(78)-CONNECTED(78)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 756], outboundChannelpool size = 0, active threads = 0, queued tasks = 0, completed tasks = 187], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 2, completed tasks = 3041]
2017-07-11 23:21:04,097 20695742 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 78 total, 0 closed abnormally (0 connect failure, 0 send limit, 1 transport error)], stompSubProtocol[processed CONNECT(78)-CONNECTED(78)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 756], outboundChannelpool size = 0, active threads = 0, queued tasks = 0, completed tasks = 187], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 2, completed tasks = 3473]
2017-07-11 23:51:04,148 22495793 [MessageBroker-2] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 78 total, 0 closed abnormally (0 connect failure, 0 send limit, 1 transport error)], stompSubProtocol[processed CONNECT(78)-CONNECTED(78)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 756], outboundChannelpool size = 0, active threads = 0, queued tasks = 0, completed tasks = 187], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 2, completed tasks = 3906]
